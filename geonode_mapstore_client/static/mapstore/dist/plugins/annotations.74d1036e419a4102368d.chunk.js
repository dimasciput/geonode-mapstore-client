(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9972],{81808:(e,t,n)=>{"use strict";n.d(t,{eD:()=>r,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>l,TL:()=>s,KS:()=>c,EB:()=>u,DZ:()=>p,Aw:()=>f,V_:()=>d,H0:()=>y,jW:()=>m,JZ:()=>g,fQ:()=>h,HK:()=>b,YO:()=>v,I6:()=>w});var r="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",l="MAP_LOAD_INFO",s="MAP_INFO_LOAD_START",c="MAP_INFO_LOADED",u="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function y(e,t,n){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:n}}function m(e,t){return{type:a,error:e,mapId:t}}function g(e,t,n,r,i){return{type:o,configName:e,mapId:t,config:n,mapInfo:r,overrideConfig:i}}function h(e,t){return{type:c,mapId:t,info:e}}function b(e,t){return{type:u,mapId:e,error:t}}function v(e){return{type:s,mapId:e}}function w(e){return{type:l,mapId:e}}},4206:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,iU:()=>s,W7:()=>c,Vw:()=>u,KD:()=>p,uj:()=>f,lo:()=>d,Yf:()=>y,fo:()=>m,PY:()=>g,bp:()=>h});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",s="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES";function u(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:c,features:e}}function d(){return{type:l}}function y(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function m(e,t){return{type:o,geometry:e,owner:t}}function g(e){return{type:i,currentStyle:e}}var h=function(e){return y("clean","",e,[],{})}},97844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(24852),o=n.n(r),i=n(45697),a=n.n(i),l=n(1036),s=n(14293),c=n.n(s),u=n(1469),p=n.n(u);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(i){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function s(){return d(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this;return o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&o().createElement(l.Z,{disabled:this.props.disabled,start:[c()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){p()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||o().createElement(l.Z,{disabled:this.props.disabled,start:[c()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);b(v,"propTypes",{opacity:a().number,disabled:a().bool,hideTooltip:a().bool,onChange:a().func}),b(v,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const w=v},1262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(27418),o=n.n(r),i=n(45697),a=n.n(i),l=n(24852),s=n.n(l),c=n(80307),u=n.n(c),p=n(30294),f=n(38560),d=n(5346),y=n(7472);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(i){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function l(){var e;g(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(w(e=a.call.apply(a,[this].concat(n))),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&u().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return s().createElement(y.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},s().createElement("span",{role:"header"},s().createElement("span",{className:"user-panel-title"},this.props.title),s().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?s().createElement(p.Glyphicon,{glyph:this.props.closeGlyph}):s().createElement("span",null,"Ã—"))),s().createElement("div",{role:"body"},this.props.children),s().createElement("div",{role:"footer"},s().createElement(p.ButtonGroup,null,s().createElement(f.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),s().createElement(f.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(s().Component);S(O,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),S(O,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:s().createElement(d.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:s().createElement(d.Z,{msgId:"confirm"})||"Confirm",closeText:s().createElement(d.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const C=O},69235:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h}),n(61057);var r=n(45697),o=n.n(r),i=n(24852),a=n.n(i),l=n(30294);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function s(){var e;c(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=i.call.apply(i,[this].concat(n))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),m(d(e),"onClear",(function(){e.props.onFilter("")})),e}return t=s,(n=[{key:"render",value:function(){var e=this.props.filterText?a().createElement(l.OverlayTrigger,{placement:"bottom",overlay:a().createElement(l.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},a().createElement(l.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):a().createElement(l.Glyphicon,{className:"text-primary",glyph:"filter"});return a().createElement(l.FormGroup,{className:"mapstore-filter"},a().createElement(l.InputGroup,null,a().createElement(l.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),a().createElement(l.InputGroup.Addon,{className:"square-button-md"},this.props.loading?a().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(a().Component);m(g,"propTypes",{loading:o().bool,filterText:o().string,filterPlaceholder:o().oneOfType([o().object,o().string]),onFilter:o().func,onFocus:o().func,tooltipClear:o().oneOfType([o().object,o().string])}),m(g,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const h=g},82110:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(24852),o=n.n(r),i=n(96259),a=n(32425);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(e){var t=e.width,n=e.height,r=e.className,l=void 0===r?"loader-container":r,c=e.contentStyle,u=void 0===c?{}:c;return o().createElement("div",{className:l},o().createElement(i.Z,null,(function(e){var r=e.width,i=void 0===r?200:r,l=e.height,c=void 0===l?200:l,p=t||(c>0?Math.min(i,c):i),f=n||(c>0?Math.min(i,c):i),d=Math.min(p,f);return o().createElement(a.Z,{size:d,style:s({padding:d/10,margin:"auto",display:"flex"},u)})})))}},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18446),o=n.n(r);const i=(0,n(67076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(85552))},38064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(45697),o=n.n(r),i=n(24852),a=n.n(i),l=n(30294),s=n(76424);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function c(){return p(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,n=e.items,r=e.colProps,o=e.onItemClick,i=e.size,c=t||s.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.Row,{className:"items-list"},n.map((function(e,t){return a().createElement(l.Col,u({key:e.id||t},r),a().createElement(c,u({onClick:function(){return o(e)},size:i},e)))}))))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a().Component);g(h,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),g(h,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const b=h},30280:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(24852),o=n.n(r),i=n(45697),a=n.n(i),l=n(47037),s=n.n(l),c=n(3918),u=n.n(c),p=n(66287);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,r,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(i);if(a){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function c(){var e;d(this,c);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return v(h(e=l.call.apply(l,[this].concat(r))),"paint",(function(t){t.save(),t.beginPath();var n=e.props.shapeStyle,r=n.color,o=n.fill;switch(t.fillStyle=o?s()(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=r?s()(r)?r:"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),v(h(e),"drawSymbol",(function(t,r){r.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=n(18845),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{r.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{r.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),v(h(e),"paintSymbol",(function(t){(0,p.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,p.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(n){return e.drawSymbol(n,t)})):e.drawSymbol(null,t)})),v(h(e),"paintText",(function(t){var n=e.props,r=n.width,o=n.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,s=i.label,c=i.font,u=void 0===c?"14px Arial":c;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(s||"New",r/2.5,o/2),void t.fillText(s||"New",r/2.5,o/2)):"end"===l?(t.strokeText(s||"New",r/1.5,o/2),void t.fillText(s||"New",r/1.5,o/2)):(t.strokeText(s||"New",r/2,o/2),void t.fillText(s||"New",r/2,o/2))})),v(h(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),v(h(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),v(h(e),"paintPoint",(function(t,n){var r=e.props.shapeStyle.radius,o=r/2;switch(n){case"square":t.rect(50-o,48.5-o,r,r);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*r/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,r,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,r,.23);break;default:t.arc(50,48.5,r,0,2*Math.PI)}t.fill(),t.stroke()})),v(h(e),"paintMarker",(function(e){var t=new Image;t.src=u();try{e.drawImage(t,42.5,24)}catch(e){return}})),v(h(e),"paintStar",(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,s=n,c=Math.PI/r;e.moveTo(t,n-o);for(var u=0;u<r;u++)l=t+Math.cos(a)*o,s=n+Math.sin(a)*o,e.lineTo(l,s),a+=c,l=t+Math.cos(a)*i,s=n+Math.sin(a)*i,e.lineTo(l,s),a+=c;e.lineTo(t,n-o),e.closePath()})),v(h(e),"paintCross",(function(e,t,n,r,o){var i=r*o/2,a=r/2;e.moveTo(t-i,n-a),e.lineTo(t+i,n-a),e.lineTo(t+i,n-i),e.lineTo(t+a,n-i),e.lineTo(t+a,n+i),e.lineTo(t+i,n+i),e.lineTo(t+i,n+a),e.lineTo(t-i,n+a),e.lineTo(t-i,n+i),e.lineTo(t-a,n+i),e.lineTo(t-a,n-i),e.lineTo(t-i,n-i),e.closePath()})),e}return t=c,(r=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return o().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);v(w,"propTypes",{originalStyle:a().object,style:a().object,shapeStyle:a().object,geomType:a().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:a().number,height:a().number}),v(w,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const E=w},86056:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(45697),o=n.n(r),i=n(24852),a=n.n(i),l=n(43129),s=n(98611),c=n.n(s);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(s,e);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function s(){var e;f(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(g(e=i.call.apply(i,[this].concat(n))),"styleRenderer",(function(t,n,r){var o=e.props.styleRendererPattern||a().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},a().createElement("path",{stroke:"#333333",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:r||t.value,d:"M0 12.5, 300 12.5"}));return a().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=s,(n=[{key:"render",value:function(){var e,t=this,n=c()(this.props.dashArray||"1 0"," "),r=this.props.options.find((function(e){return e.value===n}))?this.props.options:[{value:n}].concat(function(e){if(Array.isArray(e))return p(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?l.ZP.Creatable:l.ZP;return a().createElement(o,{options:r,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:n,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var n=e.value.split(" ");t.props.onChange(n)}}})}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(a().Component);b(v,"propTypes",{dashArray:o().array,menuPlacement:o().string,clearable:o().bool,value:o().string,optionRenderer:o().func,styleRendererPattern:o().node,valueRenderer:o().func,disabled:o().bool,onChange:o().func,options:o().array,creatable:o().bool,isValidNewOption:o().func,defaultStrokeWidth:o().number}),b(v,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const w=v},21751:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>yi});var r=n(24852),o=n.n(r),i=n(27418),a=n.n(i),l=n(45697),s=n.n(l),c=n(30294),u=n(22222),p=n(41609),f=n.n(p),d=n(96259),y=n(32833),m=n(22843),g=n(5346),h=n(82904),b=(n(78908),n(91175)),v=n.n(b),w=n(23560),E=n.n(w),S=n(52353),O=n.n(S),C=n(71167),P=n.n(C),j=n(58767),T=n(62192),k=n(1262),x=n(99534),M=n(80717),R=n(9669),F=n.n(R),A=n(84596),_=n.n(A),D=n(63105),I=n.n(D),G=n(13311),N=n.n(G),Z=n(30998),U=n.n(Z),B=n(14293),L=n.n(B),V=n(17621),z=n.n(V),W=n(23570),q=n.n(W),H=n(61868),Y=n(66287),X=n(12346),Q=n(30280),$=n(9886),K=n.n($),J=n(97844),ee=n(12961);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K()();var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(r);if(i){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ie(this,e)});function l(){return ne(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props.style;return o().createElement("div",null,o().createElement(c.Row,null,o().createElement(c.Col,{xs:12},o().createElement("strong",null,o().createElement(g.Z,{msgId:"draw.fill"})))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.color"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(ee.Z,{color:(0,Y.addOpacityToColor)(z()(t.fillColor||this.props.defaultColor).toRgb(),t.fillOpacity),width:this.props.width,onChangeColor:function(n){if(!L()(n)){var r=z()(n).toHexString(),o=n.a;e.props.onChange(t.id,{fillColor:r,fillOpacity:o})}}}))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.opacity"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(J.Z,{opacity:t.fillOpacity,onChange:function(n){e.props.onChange(t.id,{fillOpacity:n})}}))))}}])&&re(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);le(se,"propTypes",{style:s().object,defaultColor:s().string,onChange:s().func,width:s().number}),le(se,"defaultProps",{style:{},onChange:function(){}});const ce=se;var ue=n(69235),pe=n(80307),fe=n(37275);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){var t=e.disabled,n=e.containerNode,i=e.onOpen,a=e.placement,l=e.children,s=e.triggerNode,c=10,u={picker:{opacity:0},arrow:{opacity:0},overlay:{}},p=ge((0,r.useState)(u),2),f=p[0],d=p[1],y=ge((0,r.useState)(),2),m=y[0],g=y[1];(0,r.useEffect)((function(){i(m),m||d(u)}),[m]);var h=(0,r.useRef)(),b=(0,r.useRef)();function v(){var e,t,n,r,o,i,l,s=null==h||null===(e=h.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==b||null===(n=b.current)||void 0===n||null===(r=n.getBoundingClientRect)||void 0===r?void 0:r.call(n),p=null==b||null===(o=b.current)||void 0===o||null===(i=o.querySelector)||void 0===i?void 0:i.call(o,".ms-picker-node"),f=null==p||null===(l=p.getBoundingClientRect)||void 0===l?void 0:l.call(p);if(s&&u&&f){var d,y,m,g,v=f.width,w=f.height,E=u.top,S=u.left,O=u.width,C=u.height,P=s.top,j=s.left,T=s.width,k=s.height,x=[j+T/2,P+k/2],M=x[0]-S>v/2+c&&S+O-x[0]>v/2+c,R=x[1]-E>w/2+c&&E+C-x[1]>w/2+c,F={top:{filter:function(){return M&&P-E>w+c},styles:function(){return{picker:{position:"absolute",top:P-w-c-E,left:j+T/2-v/2-S},overlay:{},arrow:{top:P+2,left:j+T/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return R&&S+O-(j+T)>v+c},styles:function(){return{picker:{position:"absolute",top:P-w/2-E,left:j+T+c-S},overlay:{},arrow:{top:P+k/2,left:j+T-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return M&&E+C-(P+k)>w+c},styles:function(){return{picker:{position:"absolute",top:P+k+c-E,left:j+T/2-v/2-S},overlay:{},arrow:{top:P+k-2,left:j+T/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return R&&j-S>v+c},styles:function(){return{picker:{position:"absolute",top:P-w/2-E,left:j-v-c-S},overlay:{},arrow:{top:P+k/2,left:j+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=F&&null!==(d=F[a])&&void 0!==d&&null!==(y=d.filter)&&void 0!==y&&y.call(d))return null==F||null===(m=F[a])||void 0===m||null===(g=m.styles)||void 0===g?void 0:g.call(m);if("top"!==a&&F.top.filter())return F.top.styles();if("right"!==a&&F.right.filter())return F.right.styles();if("bottom"!==a&&F.bottom.filter())return F.bottom.styles();if("left"!==a&&F.left.filter())return F.left.styles()}return{picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}}}(0,r.useEffect)((function(){var e=function(){return d(v())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((function(){m&&d(v())}),[m]);var w=t?" ms-disabled":"",E=o().createElement("div",{ref:b,className:"ms-property-picker-overlay",style:ye({},null==f?void 0:f.overlay)},o().createElement("div",{className:"ms-property-picker-cover",onClick:function(){g(!1)}}),o().createElement("div",{className:"ms-picker-node shadow-soft",style:ye({},null==f?void 0:f.picker)},l),o().createElement("div",{className:"ms-sketch-picker-arrow",style:ye({position:"absolute",borderWidth:12},null==f?void 0:f.arrow)})),S=n?(0,pe.createPortal)(E,n):E;return o().createElement("div",{className:"ms-property-picker".concat(w)},o().createElement("div",{className:"ms-property-picker-swatch",ref:h,style:{padding:0,backgroundColor:"#ffffff",boxShadow:"none"},onClick:function(){t||g(!m)}},s),m?S:null)}be.propTypes={value:s().oneOfType([s().string,s().shape({r:s().number,g:s().number,b:s().number,a:s().number})]),format:s().string,onChangeColor:s().func,text:s().string,line:s().bool,disabled:s().bool,pickerProps:s().object,containerNode:s().node,onOpen:s().function,placement:s().string},be.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){},containerNode:document.querySelector("."+((0,fe.u8)("themePrefix")||"ms2")+" > div")||document.body};const ve=be;function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ee(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function ke(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xe(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(r);if(i){var n=Me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ke(this,e)});function l(){var e;Pe(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Re(xe(e=a.call.apply(a,[this].concat(n))),"renderMarkers",(function(t){return t.map((function(t){return t.markers?e.renderMarkers(t.markers,t.name+"-"):o().createElement("div",{onClick:function(){return e.selectStyle(t)},style:Ce(Ce({},t.thumbnailStyle),e.isCurrentStyle(t)&&{border:"2px solid #1bd2f5"})})}))})),Re(xe(e),"isCurrentStyle",(function(t){return e.props.markersOptions.markersConfig.matches(e.props.style,t.style)})),Re(xe(e),"selectStyle",(function(t){return e.props.onChange(e.props.style.id,Ce({},e.props.markersOptions.markersConfig.getStyle(t.style)))})),Re(xe(e),"filterMarkerGlyph",(function(t){var n,r;return t&&-1!==t.toLowerCase().indexOf((null===(n=e.props.markersOptions)||void 0===n||null===(r=n.filter)||void 0===r?void 0:r.toLowerCase())||"")})),e}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props.markersOptions.markers.reduce((function(e,t){var n=t.markers;return[].concat(Ee(e),Ee(n))}),[]).find((function(t){return e.isCurrentStyle(t)}))||{};return o().createElement("div",{className:"marker-container"},o().createElement("div",{className:"marker-icon"},o().createElement("div",{style:{flex:1}},o().createElement(g.Z,{msgId:"draw.marker.icon"})),o().createElement("div",{style:{flex:1}},o().createElement(ve,{triggerNode:o().createElement("div",{style:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,cursor:"pointer",margin:"auto"}},o().createElement("i",{className:"fa fa-".concat(this.props.style.iconGlyph)}))},o().createElement("div",{style:{width:256,height:256,overflow:"auto",position:"relative",backgroundColor:"#ffffff"}},o().createElement("div",{style:{position:"sticky",top:0}},o().createElement(ue.Z,{filterPlaceholder:"Filter icons...",filterText:this.props.markersOptions.filter,onFilter:this.props.markersOptions.onFilterMarker})),o().createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},this.props.markersOptions.glyphs.map((function(t){return e.filterMarkerGlyph(t)?o().createElement("div",{style:Ce({width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,cursor:"pointer"},t===e.props.style.iconGlyph&&{border:"2px solid #1bd2f5"}),onClick:function(){e.props.onChange(e.props.style.id,{iconGlyph:t})}},o().createElement("i",{className:"fa fa-".concat(t)})):null}))))))),o().createElement("div",{className:"marker-shape"},o().createElement("div",{style:{flex:1}},o().createElement(g.Z,{msgId:"draw.marker.shape"})),o().createElement("div",{style:{flex:1}},o().createElement(ve,{triggerNode:o().createElement("div",{style:Ce(Ce({},t.thumbnailStyle),{},{margin:"auto"})})},o().createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",backgroundColor:"#ffffff",width:256,height:256,overflow:"auto"}},this.renderMarkers(this.props.markersOptions.markers))))))}}])&&je(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);Re(Fe,"propTypes",{style:s().object,markersOptions:s().object,onChange:s().func,width:s().number}),Re(Fe,"defaultProps",{style:{},onChange:function(){}});const Ae=Fe;var _e=n(43129);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Ze(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ue(r);if(i){var n=Ue(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ze(this,e)});function l(){return Ie(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this;return o().createElement("div",null,o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement("strong",null,o().createElement(g.Z,{msgId:"draw.marker.type"}))),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(_e.ZP,{clearable:!1,options:this.props.options,value:this.props.pointType||"marker",onChange:function(t){var n=t&&t.value;e.props.onChangeType(e.props.style.id,n)}}))))}}])&&Ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);Be(Le,"propTypes",{style:s().object,pointType:s().string,options:s().array,onChangeType:s().func,width:s().number}),Be(Le,"defaultProps",{style:{},options:[{label:"Marker",value:"marker"},{label:"Symbol",value:"symbol"}],pointType:"marker",onChangeType:function(){}});const Ve=Le;var ze=n(1469),We=n.n(ze),qe=n(18446),He=n.n(qe),Ye=n(1036);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ke(e,t)}function Je(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tt(r);if(i){var n=tt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Je(this,e)});function l(){var e;Qe(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nt(et(e=a.call.apply(a,[this].concat(n))),"loadSymbolsList",(function(t){var n=e.props.symbolsPath+"symbols.json";F().get(n,{"Content-type":"application/json"}).then((function(n){var r=n.data;We()(r)?e.props.onUpdateOptions(r.map((function(t){return{label:t.label||t.name,value:t.name,symbolUrl:e.props.symbolsPath+t.name+".svg?_t="+Math.random()}})),!0):e.props.onUpdateOptions([{label:t,value:t,symbolUrl:e.props.symbolsPath+t+".svg"}]),e.checkSymbolUrl(e.props),e.props.onChange(e.props.style.id);var o=e.props.symbolErrors.length?I()(e.props.symbolErrors,(function(e){return"loading_symbols_path"!==e})):[];e.props.onLoadingError(o)})).catch((function(){(0,j.ZA)(e.props.symbolErrors)||e.props.onLoadingError(e.props.symbolErrors.concat(["loading_symbols_path"]))})),e.forceUpdate()})),nt(et(e),"checkSymbolUrl",(function(t){var n=t.style,r=t.symbolErrors,o=t.onLoadingError;F().get(n.symbolUrl).then((function(){var e=r.length?I()(r,(function(e){return e!=="loading_symbol"+n.shape})):[];e=e.length?I()(e,(function(e){return"loading_symbols_path"!==e})):[],o(e)})).catch((function(){(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)||o(r.concat(["loading_symbol"+n.shape]))}))})),e}return t=l,n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;if(We()(this.props.options)&&0===this.props.options.length){var t=this.props.options&&this.props.options.length?N()(this.props.options,(function(t){return t.value===e.props.defaultShape}))&&this.props.defaultShape:j.xw;this.loadSymbolsList(t)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(He()(e.style,this.props.style)||this.checkSymbolUrl(e),!He()(e.symbolErrors,this.props.symbolErrors)){var n=this.props.options&&this.props.options.length?N()(this.props.options,(function(e){return e.value===t.props.defaultShape}))&&this.props.defaultShape:j.xw;this.loadSymbolsList(n)}}},{key:"render",value:function(){var e=this,t=function(e){return o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("img",{src:e.symbolUrl||e.iconUrl,width:15,height:15}),o().createElement("span",{style:{flex:1,paddingLeft:4}}," ",e.label))},n=this.props.options&&this.props.options.length?N()(this.props.options,(function(t){return t.value===e.props.defaultShape}))&&this.props.defaultShape:j.xw;return o().createElement("div",null,o().createElement(c.Row,null,o().createElement(c.Col,{xs:12},o().createElement(g.Z,{msgId:"draw.marker.layout"}))),(0,j.ZA)(this.props.symbolErrors)?o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.marker.shape"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(c.Alert,{bsStyle:"warning"},o().createElement(g.Z,{msgId:"annotations.errorLoadingSymbols"})))):o().createElement("div",null,o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.marker.shape"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(c.InputGroup,null,o().createElement(_e.ZP,{clearable:!1,options:this.props.options,value:this.props.style.shape,onChange:function(t){var n=t&&t.value;e.props.onChange(e.props.style.id,{symbolUrl:e.props.symbolsPath+n+".svg",shape:n})},optionRenderer:t,valueRenderer:t}),o().createElement(c.InputGroup.Addon,{className:"btn",onClick:function(){return e.loadSymbolsList(n)}},o().createElement(c.Glyphicon,{glyph:"refresh"}))))),!((0,j.ZA)(this.props.symbolErrors,"loading_symbol"+this.props.style.shape)||(0,j.ZA)(this.props.symbolErrors,"loading_symbol"+this.props.defaultShape))&&o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.marker.size"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(Ye.Z,{tooltips:!0,step:1,start:[this.props.style.size||this.props.defaultShapeSize],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}},range:{min:1,max:64},onChange:function(t){var n=parseInt(t[0].replace(" px",""),10);e.props.onChange(e.props.style.id,{size:n})}}))))))}}],n&&$e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);nt(rt,"propTypes",{style:s().object,options:s().array,defaultShape:s().string,defaultShapeSize:s().number,onChange:s().func,onUpdateOptions:s().func,onLoadingError:s().func,symbolErrors:s().array,width:s().number,symbolsPath:s().string}),nt(rt,"contextTypes",{messages:s().object}),nt(rt,"defaultProps",{symbolsPath:j.Fi,style:{},defaultShape:j.xw,defaultShapeSize:64,options:[],symbolErrors:[],onChange:function(){},onUpdateOptions:function(){}});const ot=rt;var it=n(85552),at=n.n(it),lt=n(86056);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function ft(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K()();var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(r);if(i){var n=dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ft(this,e)});function l(){return ct(this,l),a.apply(this,arguments)}return t=l,n=[{key:"shouldComponentUpdate",value:function(e){return!He()(this.props.style,e.style)||!He()(this.props.lineDashOptions,e.lineDashOptions)}},{key:"render",value:function(){var e=this,t=this.props.style;return o().createElement("div",null,o().createElement(c.Row,null,o().createElement(c.Col,{xs:12},o().createElement("strong",null,o().createElement(g.Z,{msgId:"draw.stroke"})))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.lineDash"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(lt.Z,{options:this.props.lineDashOptions,dashArray:t.dashArray,onChange:function(n){e.props.onChange(t.id,{dashArray:n})}}))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.color"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(ee.Z,{color:(0,Y.addOpacityToColor)(z()(t.color||this.props.defaultColor).toRgb(),t.opacity),width:this.props.width,onChangeColor:function(n){if(!L()(n)){var r=z()(n).toHexString(),o=n.a;e.props.onChange(t.id,{color:r,opacity:o})}}}))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.opacity"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement(J.Z,{opacity:L()(t.opacity)?.2:t.opacity,onChange:function(n){e.props.onChange(t.id,{opacity:n})}}))),o().createElement(c.Row,null,o().createElement(c.Col,{xs:6},o().createElement(g.Z,{msgId:"draw.width"})),o().createElement(c.Col,{xs:6,style:{position:"static"}},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(at(),{tooltips:!0,step:1,start:[t.weight||t.width||1],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}},range:{min:L()(this.props.constraints&&this.props.constraints.minWidth)?1:this.props.constraints.maxWidth,max:this.props.constraints&&this.props.constraints.maxWidth||15},onChange:function(n){var r=parseInt(n[0].replace(" px",""),10);e.props.onChange(t.id,{weight:r})}})))))}}],n&&ut(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);yt(mt,"propTypes",{style:s().object,defaultColor:s().string,lineDashOptions:s().array,onChange:s().func,width:s().number,constraints:s().object}),yt(mt,"defaultProps",{style:{},constraints:{maxWidth:15,minWidth:1},onChange:function(){}});const gt=mt;var ht=n(20),bt=n(73333),vt=n(86638);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}function jt(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K()();var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kt(r);if(i){var n=kt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jt(this,e)});function l(){var e;Ot(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xt(Tt(e=a.call.apply(a,[this].concat(n))),"state",{fontFamily:"Arial"}),e}return t=l,n=[{key:"render",value:function(){var e=this,t={emptyList:(0,vt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,vt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,vt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=this.props.style;return o().createElement("div",{className:"ms-text-style"},o().createElement("div",{className:"content"},o().createElement("strong",null,o().createElement(g.Z,{msgId:"draw.fontTitle"}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.font.family"})),o().createElement("div",{className:"right"},o().createElement(ht.Combobox,{value:this.state.fontFamily||"Arial",textField:"value",valueField:"value",messages:t,data:this.props.fontFamilyValues,onChange:function(t){var r=t.value?t.value:t;""===r&&(r="Arial"),e.setState({fontFamily:r});var o=(0,j.vh)(St(St({},n),{},{fontFamily:r}));e.props.onChange(n.id,{fontFamily:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.font.size"})),o().createElement("div",{className:"right",style:{display:"flex"}},o().createElement("div",{className:"left font-size"},o().createElement(bt.Z,{value:n.fontSize||14,placeholder:"",onChange:function(t){var r=t||14,o=(0,j.vh)(St(St({},n),{},{fontSize:r}));e.props.onChange(n.id,{fontSize:r,font:o})},type:"number"})),o().createElement(ht.Combobox,{className:"font-uom",value:n.fontSizeUom||"px",textField:"value",valueField:"value",messages:t,data:this.props.uomValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.uomValues.map((function(e){return e.value})).indexOf(r)&&(r="px");var o=(0,j.vh)(St(St({},n),{},{fontSizeUom:r}));e.props.onChange(n.id,{fontSizeUom:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.font.style"})),o().createElement("div",{className:"right"},o().createElement(ht.Combobox,{value:n.fontStyle||"normal",textField:"value",valueField:"value",messages:t,data:this.props.fontStyleValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.fontStyleValues.map((function(e){return e.value})).indexOf(r)&&(r=n.fontStyle);var o=(0,j.vh)(St(St({},n),{},{fontStyle:r}));e.props.onChange(n.id,{fontStyle:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.font.weight"})),o().createElement("div",{className:"right"},o().createElement(ht.Combobox,{value:n.fontWeight||"normal",textField:"value",valueField:"value",messages:t,data:this.props.fontWeightValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.fontWeightValues.map((function(e){return e.value})).indexOf(r)&&(r=n.fontWeight);var o=(0,j.vh)(St(St({},n),{},{fontWeight:r}));e.props.onChange(n.id,{fontWeight:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement("strong",null,o().createElement(g.Z,{msgId:"draw.text"})))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.font.textAlign"})),o().createElement("div",{className:"right"},o().createElement(ht.Combobox,{value:n.textAlign||"center",textField:"label",valueField:"value",messages:t,data:this.props.alignValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.alignValues.map((function(e){return e.value})).indexOf(r)&&(r="center"),e.props.onChange(n.id,{textAlign:r})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(g.Z,{msgId:"draw.textRotation"})),o().createElement("div",{className:"right"},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(at(),{tooltips:!0,step:this.props.rotationStep,start:[n.textRotationDeg||0],format:{from:function(e){return Math.round(parseFloat(e))},to:function(e){return Math.round(e)+" &deg;"}},range:{min:0,max:359},onChange:function(t){var r=parseInt(t[0].replace(" &deg;",""),10);e.props.onChange(n.id,{textRotationDeg:r})}})))))}}],n&&Ct(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);xt(Mt,"propTypes",{style:s().object,onChange:s().func,addOpacityToColor:s().func,width:s().number,uomValues:s().array,alignValues:s().array,fontStyleValues:s().array,fontWeightValues:s().array,fontFamilyValues:s().array,shapeStyle:s().object,rotationStep:s().number}),xt(Mt,"contextTypes",{messages:s().object}),xt(Mt,"defaultProps",{style:{},onChange:function(){},uomValues:[{value:"px"},{value:"em"}],fontWeightValues:[{value:"normal"},{value:"bold"}],alignValues:[{value:"start",label:"left"},{value:"center",label:"center"},{value:"end",label:"right"}],fontStyleValues:[{value:"normal"},{value:"italic"}],fontFamilyValues:[{value:"Arial"},{value:"Helvetica"},{value:"sans-serif"},{value:"Courier"}],shapeStyle:{},rotationStep:5});const Rt=Mt;function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},At.apply(this,arguments)}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nt(e,t)}function Zt(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bt(r);if(i){var n=Bt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zt(this,e)});function s(){var e;It(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Lt(Ut(e=l.call.apply(l,[this].concat(n))),"state",{}),Lt(Ut(e),"renderPanelStyle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i={style:t,onChange:e.change,width:e.props.width},l=(0,Y.isTextStyle)(t)||(0,Y.isSymbolStyle)(t),s=!((0,Y.isMarkerStyle)(t)||(0,Y.isSymbolStyle)(t)&&((0,j.ZA)(e.props.symbolErrors)||(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape)))&&o().createElement("div",{className:"ms-marker-preview",style:{display:"flex",width:"100%",height:90}},o().createElement(Q.Z,{style:Dt({padding:0,margin:"auto",display:"block",width:l?"100%":"auto"},l&&{transform:"scaleX(2.2) scaleY(2.5)"}),originalStyle:t,shapeStyle:a()({},t,{color:(0,Y.addOpacityToColor)(z()(t.color).toRgb(),L()(t.opacity)?1:t.opacity),fill:(0,Y.addOpacityToColor)(z()(t.fillColor||"#FFCC33").toRgb(),L()(t.fillOpacity)?1:t.fillOpacity),radius:75}),geomType:(0,Y.getStylerTitle)(t),width:l?600:90,height:120})),u=(0,Y.isStrokeStyle)(t)&&(0,Y.isSymbolStyle)(t)&&((0,j.ZA)(e.props.symbolErrors)||(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape))?null:(0,Y.isStrokeStyle)(t)?o().createElement(gt,At({},i,{defaultColor:e.props.defaultShapeStrokeColor,lineDashOptions:e.props.lineDashOptions,constraints:{maxWidth:(0,Y.isSymbolStyle)(t)?5:15},key:"stroke"+r})):null,p=(0,Y.isFillStyle)(t)&&(0,Y.isSymbolStyle)(t)&&((0,j.ZA)(e.props.symbolErrors)||(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape))?null:(0,Y.isFillStyle)(t)&&o().createElement(ce,At({},i,{defaultColor:e.props.defaultShapeFillColor,key:"fill"+r}))||null,f=(0,Y.isTextStyle)(t)&&o().createElement(Rt,At({},i,{rotationStep:e.props.textRotationStep}))||null,d=((0,Y.isMarkerStyle)(t)||(0,Y.isSymbolStyle)(t))&&o().createElement(Ve,At({},i,{pointType:(0,Y.isSymbolStyle)(t)?"symbol":"marker",onChangeType:e.changeSymbolType}))||null,y=(0,Y.isMarkerStyle)(t)&&o().createElement(Ae,At({},i,{markersOptions:e.props.markersOptions}))||null,m=(0,Y.isSymbolStyle)(t)&&o().createElement(ot,At({},i,{style:Dt({},t),symbolsPath:e.props.symbolsPath,defaultShape:e.props.defaultShape,defaultShapeSize:e.props.defaultShapeSize,onUpdateOptions:function(t){e.props.onUpdateSymbols(t)},options:e.props.symbolList,symbolErrors:e.props.symbolErrors,onLoadingError:e.props.onSetErrorSymbol}))||null,g=o().createElement("hr",null),h=[d,s,m,y,f,p,u];return o().createElement(c.Grid,{fluid:!0,style:{width:"100%"},className:"ms-style",key:"grid"+r},o().createElement(X.Z,At({},n,{key:"switchPanel"+r}),h.reduce((function(e,t,n){return[e,e&&t&&o().createElement("span",{key:"separator"+n},g),t]}))))})),Lt(Ut(e),"change",(function(t,n){var r=_()(e.props.style),o=Dt(Dt({},N()(r,{id:t})),n);(0,Y.isSymbolStyle)(o)?(0,Y.fetchStyle)((0,Y.hashAndStringify)(o))?e.updateStyles(t,(0,Y.fetchStyle)((0,Y.hashAndStringify)(o)),r,!0):(0,Y.createSvgUrl)(o,o.symbolUrl).then((function(n){e.updateStyles(t,Dt(Dt({},o),{},{symbolUrlCustomized:n}),r,!0)})):e.updateStyles(t,o,r,!0)})),Lt(Ut(e),"updateStyles",(function(t,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o&&(0,Y.registerStyle)((0,Y.hashAndStringify)(n),n);var i=(0,H.cc)(!1,n,{id:t},r);e.props.onChangeStyle(i)})),Lt(Ut(e),"changeSymbolType",(function(t,n){var r;e.updateStylesAndType(t,n,null===(r=e.props.defaultStyles.POINT)||void 0===r?void 0:r[n])})),Lt(Ut(e),"updateStylesAndType",(function(t,n,r){var o=_()(e.props.style),i=U()(o,{id:t});if(-1!==i){var a=o.map((function(e,t){return t===i?Dt(Dt({},r),{},{id:e.id,title:e.title,geometry:e.geometry,filtering:e.filtering}):e}));e.props.onChangeStyle(a)}})),Lt(Ut(e),"checkSymbolUrl",(function(t){var n=t.style,r=t.symbolErrors,o=t.onLoadingError,i=void 0===o?e.props.onSetErrorSymbol:o;F().get(n.symbolUrl).then((function(){if(!(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)){var t=I()(r,(function(e){return e!=="loading_symbol"+n.shape}));i(t)}})).catch((function(){(0,j.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)||i(r.concat(["loading_symbol"+n.shape]))}))})),e}return t=s,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=_()(this.props.style),n=t.map((function(e,t){return 0===t||e.filtering})),r=t.map((function(e,t){return 0===t}));this.setState({expanded:n,locked:r}),t.forEach((function(t){e.checkSymbolUrl(Dt(Dt({},e.props),{},{style:t}))}))}},{key:"render",value:function(){var e=this,t=_()(this.props.style);return o().createElement("div",{className:"ms-style-manager"},t.map((function(n,r){return e.renderPanelStyle(Dt(Dt({},n),{},{id:n.id||q()()}),{expanded:e.state.expanded[r],locked:e.state.locked[r],onSwitch:function(){e.setState((function(){return{expanded:e.state.expanded.map((function(t,n){return r===n?!e.state.expanded[r]:e.state.expanded[n]}))}}));var n=t.map((function(t,n){return n===r?Dt(Dt({},t),{},{filtering:!e.state.expanded[r]}):t}));e.props.onChangeStyle(n)},title:n.title||(0,Y.getStylerTitle)(n)+" Style"},r)})))}}])&&Gt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);Lt(Vt,"propTypes",{style:s().object,switchPanelOptions:s().array,lineDashOptions:s().array,onChangeStyle:s().func,pointType:s().string,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,width:s().number,symbolsPath:s().string,defaultShape:s().string,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,symbolList:s().array,symbolErrors:s().array,defaultSymbol:s().object,defaultMarker:s().object,markersOptions:s().object,textRotationStep:s().number}),Lt(Vt,"defaultProps",{style:{},defaultShape:j.xw,symbolsPath:j.Fi,defaultShapeSize:64,defaultShapeFillColor:"#000000",defaultShapeStrokeColor:"#000000",symbolErrors:[],onChangeStyle:function(){},onUpdateSymbols:function(){},defaultStyles:{},switchPanelOptions:[]});const zt=Vt;var Wt=n(33506),qt=Wt.Z.markers.extra.icons[0],Ht=Wt.Z.markers.extra.getGrid();const Yt={fields:[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}],markers:Ht,markerIcon:qt,markersConfig:Wt.Z.markers.extra,multiGeometry:!1,glyphs:Object.keys(Wt.Z.getGlyphs("fontawesome")),getGlyphClassName:function(e){return"fa fa-"+e.iconGlyph},getMarkerFromStyle:function(e){return Ht.filter((function(t){return t.name===e.iconShape}))[0].markers.filter((function(t){return t.name===e.iconColor}))[0]}};var Xt=n(13292),Qt=n.n(Xt),$t=n(94184),Kt=n.n($t),Jt=n(27361),en=n.n(Jt);function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn.apply(this,arguments)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var an=function(e){var t,n=e.editing,r=e.onAddGeometry,i=e.onSetStyle,a=e.onStartDrawing,l=e.onAddText,s=e.onStyleGeometry,u=e.setTabValue,p=e.isMeasureEditDisabled,f=e.onSetAnnotationMeasurement,d=e.showPopupWarning,y=e.setPopupWarning,m=e.geodesic,h=e.defaultStyles,b=e.defaultPointType,v=(n||{}).features,w=void 0===v?[]:v,E=en()(e,"selected.properties.isValidFeature",!0),S=function(e,t){s(!1),r(e),"Text"===e&&l(),i(t),a({geodesic:m}),u("coordinates")};return o().createElement(o().Fragment,null,o().createElement("div",{className:"geometries-toolbar"},o().createElement(c.ControlLabel,null,o().createElement(g.Z,{msgId:"annotations.geometries"})),o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:null==n||null===(t=n.properties)||void 0===t?void 0:t.iconGlyph,visible:!p,disabled:!E,onClick:function(){d?y(!0):f()},tooltip:o().createElement(g.Z,{msgId:"annotations.editMeasurement"})},{glyph:"point-plus",visible:p,disabled:!E,onClick:function(){var e,t=[rn(rn({},null===(e=h.POINT)||void 0===e?void 0:e[b]),{},{highlight:!0,id:q()()})];S("Point",t)},tooltip:o().createElement(g.Z,{msgId:"annotations.titles.marker"})},{glyph:"polyline-plus",visible:p,disabled:!E,onClick:function(){var e=[rn(rn({},j.z4.LineString),{},{highlight:!0,id:q()()})].concat((0,j.N_)());S("LineString",e)},tooltip:o().createElement(g.Z,{msgId:"annotations.titles.line"})},{glyph:"polygon-plus",visible:p,disabled:!E,onClick:function(){var e=[rn(rn({},j.z4.Polygon),{},{highlight:!0,id:q()()})];S("Polygon",e)},tooltip:o().createElement(g.Z,{msgId:"annotations.titles.polygon"})},{glyph:"font-add",visible:p,disabled:!E,onClick:function(){var e=[rn(rn({},j.z4.Text),{},{highlight:!0,type:"Text",title:"Text Style",id:q()()})];S("Text",e)},tooltip:o().createElement(g.Z,{msgId:"annotations.titles.text"})},{glyph:"1-circle-add",visible:p,disabled:!E,onClick:function(){var e=[rn(rn({},j.z4.Circle),{},{highlight:!0,type:"Circle",title:"Circle Style",id:q()()}),rn(rn({},j.z4.Point),{},{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"Center Style",filtering:!1,geometry:"centerPoint",id:q()()})];S("Circle",e)},tooltip:o().createElement(g.Z,{msgId:"annotations.titles.circle"})}]})),w&&0===w.length&&o().createElement("div",{style:{textAlign:"center"}},o().createElement(g.Z,{msgId:"annotations.addGeometry"})),null==w?void 0:w.map((function(t,n){return o().createElement(ln,tn({feature:t,key:n},e))})))},ln=function(e){var t,n=e.feature,r=e.selected,i=e.onDeleteGeometry,a=e.onZoom,l=e.maxZoom,s=e.onSelectFeature,u=e.onUnselectFeature,p=e.setTabValue,f=e.isMeasureEditDisabled,d=e.onStyleGeometry,y=e.onGeometryHighlight,m=(0,j.q9)(n),h=n.properties,b=(0,j.XL)(m),v=b.glyph,w=b.label,E=(null==r||null===(t=r.properties)||void 0===t?void 0:t.id)===(null==h?void 0:h.id),S=en()(r,"properties.isValidFeature",!0),O=S||(null==h?void 0:h.isValidFeature),C=!E&&S;return o().createElement("div",{className:Kt()("geometry-card",{"ms-selected":E}),onMouseEnter:function(){return C&&y(h.id)},onMouseLeave:function(){return C&&y(h.id,!1)},onClick:function(){E?(u(),y(h.id)):(s([n]),p(f?"coordinates":"style"),d(!f))}},o().createElement("div",{className:"geometry-card-preview"},o().createElement(c.Glyphicon,{glyph:v})),o().createElement("div",{className:"geometry-card-label"},o().createElement("div",null,(null==h?void 0:h.geometryTitle)||w||(null==h?void 0:h.id))),o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{Element:function(){return o().createElement(c.Glyphicon,{glyph:O?"ok-sign":"exclamation-mark",className:"text-"+(O?"success":"danger")})}},{glyph:"zoom-to",visible:O,tooltip:o().createElement(g.Z,{msgId:"annotations.zoomToGeometry"}),onClick:function(e){e.stopPropagation();var t=Qt()(n);a(t,"EPSG:4326",l)}},{glyph:"trash",visible:O,tooltip:o().createElement(g.Z,{msgId:"annotations.removeGeometry"}),onClick:function(e){e.stopPropagation(),i(null==h?void 0:h.id)}}]}))};an.defaultProps={onAddGeometry:function(){},onSetStyle:function(){},onStartDrawing:function(){},onAddText:function(){},onStyleGeometry:function(){},onSetAnnotationMeasurement:function(){},onSelectFeature:function(){},setTabValue:function(){},isMeasureEditDisabled:!0,defaultPointType:"marker"};const sn=an;var cn=n(60024);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pn.apply(this,arguments)}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t){return yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yn(e,t)}function mn(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gn(e)}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yn(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gn(r);if(i){var n=gn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return mn(this,e)});function l(){return fn(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this;return o().createElement(cn.Z,pn({},this.props.options,{items:[],isDraggable:!0,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,j.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat]}));e.props.onChange(i,n,r,o)}}))}}])&&dn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);hn(bn,"propTypes",{components:s().array,options:s().object,onRemove:s().func,onChange:s().func,transitionProps:s().object,selected:s().object,featureType:s().string,format:s().string,mapProjection:s().string,onComplete:s().func,onHighlightPoint:s().func,onChangeFormat:s().func,onChangeRadius:s().func,onSetInvalidSelected:s().func,aeronauticalOptions:s().object,onChangeText:s().func,renderer:s().string}),hn(bn,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}});const vn=bn;var wn=n(15124);function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}var Sn=["newFeature"];function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},On.apply(this,arguments)}function Cn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function Mn(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rn(e)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e){return Fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fn(e)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fn(r);if(i){var n=Fn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Mn(this,e)});function s(){var e;Tn(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return An(Rn(e=l.call.apply(l,[this].concat(n))),"state",{editedFields:{},removing:null,textValue:"",tabValue:"coordinates",showPopupWarning:!1}),An(Rn(e),"getConfig",(function(){return jn(jn(jn({},Yt),e.props.config),{},{onFilterMarker:e.props.onFilterMarker})})),An(Rn(e),"getBodyItems",(function(t){return e.getConfig().fields.filter((function(e){return!t||e.editable})).map((function(n){var r=t&&e.props.errors[n.name],i=r?"field-error":"";return o().createElement("div",{key:n.name,className:"mapstore-annotations-info-viewer-item mapstore-annotations-info-viewer-"+n.name+" "+i},n.showLabel?o().createElement("label",null,o().createElement(g.Z,{msgId:"annotations.field."+n.name})):null,r?e.renderErrorOn(n.name):"",e.renderProperty(n,e.props[n.name]||n.value,t))}))})),An(Rn(e),"getValidator",(function(e){return E()(e)?e:(0,m.CU)({},{},"{(function(value) {return "+e+";})}")})),An(Rn(e),"renderViewButtons",(function(){return o().createElement(c.Grid,{fluid:!0,style:e.props.styling?{width:"100%",boxShadow:"none"}:{width:"100%"}},o().createElement(c.Row,{className:"noTopMargin"},o().createElement(c.Col,{xs:12,className:"text-center"},o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",tooltipId:"annotations.back",visible:e.props.showBack,onClick:function(){var t,n;e.props.onCancelEdit(null===(t=e.props)||void 0===t||null===(n=t.feature)||void 0===n?void 0:n.properties),e.props.onCancel(),e.props.onCleanHighlight()}},{glyph:"pencil",tooltipId:"annotations.edit",visible:e.props.showEdit,multiGeometry:e.props.config.multiGeometry,onClick:function(){e.props.onEdit(e.props.id)},disabled:!e.props.config.multiGeometry&&e.props.editing&&e.props.editing.features&&e.props.editing.features.length,bsStyle:e.props.drawing?"success":"primary"},{glyph:"trash",tooltipId:"annotations.remove",visible:!0,onClick:function(){e.setState({removing:e.props.id})}},{glyph:"download",tooltip:o().createElement(g.Z,{msgId:"annotations.downloadcurrenttooltip"}),visible:!0,onClick:function(){e.props.onDownload(e.props.features)}}]}))))})),An(Rn(e),"renderEditingCoordButtons",(function(){var t,n,r,i,a;return o().createElement(c.Grid,{className:"mapstore-annotations-info-viewer-buttons",fluid:!0},o().createElement(c.Row,{className:"text-center noTopMargin"},o().createElement(c.Col,{xs:12},o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",tooltipId:"annotations.back",visible:!0,disabled:(null===(t=e.props)||void 0===t||null===(n=t.selected)||void 0===n?void 0:n.properties)&&!(null!==(r=e.props)&&void 0!==r&&null!==(i=r.selected)&&void 0!==i&&null!==(a=i.properties)&&void 0!==a&&a.isValidFeature)||!1,onClick:function(){if(e.props.styling&&e.isMeasureEditDisabled())e.props.unsavedStyle?e.props.onToggleUnsavedStyleModal():e.props.onCancelStyle();else if(e.props.unsavedGeometry)e.props.onToggleUnsavedGeometryModal();else if(e.props.unsavedChanges)e.props.onToggleUnsavedChangesModal();else{var t;e.props.onResetCoordEditor(),e.props.onCancelEdit(null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.setState(jn(jn({},e.state),{},{tabValue:"coordinates"}))}}},{glyph:"trash",tooltipId:"annotations.remove",disabled:!e.props.annotations.length,visible:!e.props.selected,onClick:function(){e.setState({removing:e.props.id})}},{glyph:"floppy-disk",tooltipId:f()(e.props.selected)?"annotations.save":"annotations.saveGeometry",disabled:e.props.selected&&e.props.selected.properties&&!e.props.selected.properties.isValidFeature,onClick:function(){return e.save()}},{glyph:"download",tooltip:o().createElement(g.Z,{msgId:"annotations.downloadcurrenttooltip"}),disabled:0!==Object.keys(e.validate()).length||e.props.unsavedChanges,visible:!e.props.selected,onClick:function(){var t=e.props.editing,n=(t.newFeature,Cn(t,Sn));e.props.onDownload(n)}}]}))))})),An(Rn(e),"renderButtons",(function(t){var n;return n=t?e.renderEditingCoordButtons():e.renderViewButtons(),o().createElement("div",{className:"mapstore-annotations-info-viewer-buttons"},n)})),An(Rn(e),"renderProperty",(function(t,n,r){var i=void 0===e.props.editedFields[t.name]?n:e.props.editedFields[t.name];if(r)switch(t.type){case"html":return o().createElement(P(),{value:i||"",onChange:function(n){e.change(t.name,n),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}});case"component":var a=i;return o().createElement("prop",{editing:!0,value:o().createElement(a,{annotation:e.props.feature}),onChange:function(n){e.change(t.name,n.target.value),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}});default:return o().createElement(c.FormControl,{value:i||"",onChange:function(n){e.change(t.name,n.target.value),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}})}switch(t.type){case"html":return o().createElement("span",{dangerouslySetInnerHTML:{__html:i}});case"component":var l=i;return o().createElement(l,{annotation:e.props.feature});default:return o().createElement("p",null,i)}})),An(Rn(e),"renderErrorOn",(function(t){return o().createElement("div",{className:"annotations-edit-error"},o().createElement(g.Z,{msgId:e.props.errors[t]}))})),An(Rn(e),"renderMarkers",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.map((function(t){return t.markers?o().createElement("div",{className:"mapstore-annotations-info-viewer-marker-group mapstore-annotations-info-viewer-marker-"+n+t.name},e.renderMarkers(t.markers,t.name+"-")):o().createElement("div",{onClick:function(){return e.selectStyle(t)},className:"mapstore-annotations-info-viewer-marker mapstore-annotations-info-viewer-marker-"+n+t.name+(e.isCurrentStyle(t)?" mapstore-annotations-info-viewer-marker-selected":""),style:t.thumbnailStyle})}))})),An(Rn(e),"renderBody",(function(t){var n=e.getBodyItems(t);return 0===n.length?null:o().createElement("div",{className:"mapstore-annotations-info-viewer-items"+(e.props.styling?" mapstore-annotations-info-viewer-styler":"")},o().createElement("div",null,n,t&&o().createElement(sn,{editing:e.props.editing,selected:e.props.selected,onAddGeometry:e.props.onAddGeometry,onSetStyle:e.props.onSetStyle,onStartDrawing:e.props.onStartDrawing,onAddText:e.props.onAddText,onDeleteGeometry:e.props.onDeleteGeometry,onZoom:e.props.onZoom,maxZoom:e.props.maxZoom,setTabValue:e.setTabValue,styling:e.props.styling,onStyleGeometry:e.props.onStyleGeometry,onSelectFeature:e.props.onSelectFeature,drawing:e.props.drawing,onUnselectFeature:e.props.onUnSelectFeature,onGeometryHighlight:e.props.onGeometryHighlight,isMeasureEditDisabled:e.isMeasureEditDisabled(),onSetAnnotationMeasurement:e.setAnnotationMeasurement,setPopupWarning:e.setPopupWarning,showPopupWarning:e.props.showPopupWarning,geodesic:e.props.geodesic,defaultPointType:e.getConfig().defaultPointType,defaultStyles:e.props.defaultStyles})))})),An(Rn(e),"renderError",(function(t){return t?Object.keys(e.props.errors).filter((function(t){return 0===e.getConfig().fields.filter((function(e){return e.name===t})).length})).map((function(t){return e.renderErrorOn(t)})):null})),An(Rn(e),"renderModals",(function(){return e.props.closing?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:e.props.onCancelClose,onConfirm:function(){var t;return e.props.onConfirmClose(null===(t=e.props.editing)||void 0===t?void 0:t.properties)},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},o().createElement(g.Z,{msgId:"annotations.undo"}))):e.props.showUnsavedChangesModal?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedChangesModal,onConfirm:function(){var t;e.props.selected&&e.props.onResetCoordEditor(),e.props.onCancelEdit(null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.props.onToggleUnsavedChangesModal()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},o().createElement(g.Z,{msgId:"annotations.undo"}))):e.props.showUnsavedGeometryModal?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedGeometryModal,onConfirm:function(){e.props.onResetCoordEditor()},confirmButtonBSStyle:"default",closeGlyph:"1-close",title:o().createElement(g.Z,{msgId:"annotations.titleUndoGeom"}),confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirmGeom"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancelModalGeom"})},o().createElement(g.Z,{msgId:"annotations.undoGeom"}))):e.props.showUnsavedStyleModal?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedStyleModal,onConfirm:function(){e.props.onCancelStyle(),e.props.onToggleUnsavedStyleModal(),e.isMeasureEditDisabled()?e.setTabValue("coordinates"):e.setTabValue("style")},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},o().createElement(g.Z,{msgId:"annotations.undo"}))):e.props.showDeleteFeatureModal?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:e.props.onToggleDeleteFtModal,onConfirm:function(){e.props.onConfirmDeleteFeature(),e.props.onToggleDeleteFtModal()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},o().createElement(g.Z,{msgId:"annotations.undoDeleteFeature"}))):e.state.removing||e.props.removing?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,onClose:function(){e.state.removing&&e.setState({removing:null}),e.props.onCancelRemove()},focusConfirm:e.props.removing,onConfirm:function(){e.state.removing?(e.setState({removing:null}),e.props.onConfirmRemove(e.state.removing,"features")):e.props.onConfirmRemove(e.props.removing,"geometry")},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},"editing"===e.props.mode?o().createElement(g.Z,{msgId:"annotations.removegeometry"}):o().createElement(g.Z,{msgId:"annotations.removeannotation",msgParams:{title:null===(t=e.props)||void 0===t||null===(n=t.feature)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.title}}))):e.state.showPopupWarning&&e.props.showPopupWarning?o().createElement(x.Z,null,o().createElement(k.Z,{show:!0,modal:!0,title:o().createElement(g.Z,{msgId:"annotations.warning"}),onClose:e.hideWarning,onConfirm:e.setAnnotationMeasurement,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(g.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(g.Z,{msgId:"annotations.cancel"})},o().createElement("span",null,o().createElement("p",null,o().createElement(g.Z,{msgId:"annotations.measureWarningText"})),o().createElement("p",null,o().createElement(c.Checkbox,{checked:e.props.showAgain,onClick:e.props.onToggleShowAgain},o().createElement(g.Z,{msgId:"annotations.notShowAgain"})))))):null;var t,n,r})),An(Rn(e),"change",(function(t,n){e.props.onChangeProperties(t,n)})),An(Rn(e),"isCurrentStyle",(function(t){return e.getConfig().markersConfig.matches(e.props.editing.style.MultiPoint,t.style)})),An(Rn(e),"selectStyle",(function(t){return e.props.onSetStyle(a()({},{Point:jn(jn({},e.getConfig().markersConfig.getStyle(t.style)),{},{iconGlyph:e.props.editing.style.Point&&e.props.editing.style.Point.iconGlyph}),MultiPoint:jn(jn({},e.getConfig().markersConfig.getStyle(t.style)),{},{iconGlyph:e.props.editing.style.MultiPoint&&e.props.editing.style.MultiPoint.iconGlyph})}))})),An(Rn(e),"selectGlyph",(function(t){return e.props.onSetStyle(a()({},e.props.editing.style,{Point:jn(jn({},e.props.editing.style.Point),{},{iconGlyph:t&&t.value||""}),MultiPoint:jn(jn({},e.props.editing.style.MultiPoint),{},{iconGlyph:t&&t.value||""})}))})),An(Rn(e),"validate",(function(){return a()(e.getConfig().fields.filter((function(e){return e.editable})).reduce((function(t,n){var r=void 0===e.props.editedFields[n.name]?e.props[n.name]:e.props.editedFields[n.name];return n.validator&&!e.getValidator(n.validator)(r)?a()(t,An({},n.name,n.validateError)):t}),{}),e.props.editing.features&&e.props.editing.features.length?{}:{geometry:"annotations.emptygeometry"})})),An(Rn(e),"validateText",(function(e,t){if(e&&e.length){var n=v()(e);return!!t&&(0,j.Tl)(n)}return!1})),An(Rn(e),"save",(function(){if(f()(e.props.selected)){var t=e.validate();0===Object.keys(t).length?(e.props.onError({}),e.props.onSave(e.props.id,a()({},e.props.editedFields),e.props.editing.features,e.props.editing.style,e.props.editing.newFeature||!1,jn(jn({},e.props.editing.properties),{},{visibility:O()(e.props.editing.properties.visibility)?e.props.editing.visibility:e.props.editing.properties.visibility}))):e.props.onError(t)}else e.props.onAddNewFeature()})),An(Rn(e),"setTabValue",(function(t){e.state.tabValue!==t&&e.setState(jn(jn({},e.state),{},{tabValue:t}))})),An(Rn(e),"setPopupWarning",(function(t){e.setState(jn(jn({},e.state),{},{showPopupWarning:t}))})),An(Rn(e),"isMeasureEditDisabled",(function(){var t,n,r=(null===(t=e.props.editing)||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.type)===T.zE||!1;return!e.props.measurementAnnotationEdit||!r})),An(Rn(e),"setAnnotationMeasurement",(function(){var t;e.props.onSetAnnotationMeasurement(e.props.editing.features.filter((function(e){return"Point"!==e.geometry.type&&!e.properties.isCircle})),null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.hideWarning()})),An(Rn(e),"hideWarning",(function(){if(e.props.showAgain){try{(0,wn.ac)().setItem("showPopupWarning",!1)}catch(e){console.error(e)}e.props.onHideMeasureWarning()}e.setPopupWarning(!1)})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.onInitPlugin()}},{key:"render",value:function(){var e,t,n,r,i,a,l,s,u,p=this,d=this.props.editing&&this.props.editing.properties.id===this.props.id,y=this.props.mouseHoverEvents?{onMouseEnter:function(){p.props.onHighlight(p.props.id)},onMouseLeave:function(){p.props.onCleanHighlight()}}:{},m=this.props.selected?(0,j.q9)(this.props.selected):"",h=f()(m)?{}:(0,j.XL)(m),b=h.glyph,v=void 0===b?"":b,w=h.label,E=void 0===w?"":w;return o().createElement("div",On({style:{display:"flex"},className:"mapstore-annotations-info-viewer"+(this.props.mouseHoverEvents?" hover-background":"")},y),o().createElement("div",{style:{flex:1}},this.renderButtons(d),this.renderError(d),this.renderModals(),this.renderBody(d)),!f()(this.props.selected)&&o().createElement("div",{className:"mapstore-annotations-info-viewer-expanded"},o().createElement("div",{style:{padding:8,display:"flex",alignItems:"center"}},o().createElement(c.Glyphicon,{glyph:v,style:{fontSize:20,paddingRight:8}}),o().createElement("div",{style:{flex:1}},o().createElement(c.FormControl,{value:(null===(e=this.props.selected)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.geometryTitle)||E||(null===(n=this.props.selected)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id),name:"text",placeholder:"Enter geometry title",onChange:function(e){var t=e.target.value.trim();p.props.onChangeGeometryTitle(t||E)},type:"text"}))),(null===(i=this.props.selected)||void 0===i||null===(a=i.properties)||void 0===a?void 0:a.isText)&&o().createElement("div",{style:{padding:8}},o().createElement(c.FormGroup,null,o().createElement(c.FormGroup,{validationState:null!==(l=this.props.selected)&&void 0!==l&&l.properties.valueText?null:"error"},o().createElement(c.ControlLabel,null,o().createElement(g.Z,{msgId:"annotations.editor.text"})),o().createElement(c.FormControl,{value:(null===(s=this.props.selected)||void 0===s||null===(u=s.properties)||void 0===u?void 0:u.valueText)||"",name:"text",placeholder:"text value",onChange:function(e){var t,n,r,o,i=e.target.value,a=null!==(t=p.props)&&void 0!==t&&null!==(n=t.selected)&&void 0!==n&&null!==(r=n.geometry)&&void 0!==r&&null!==(o=r.coordinates)&&void 0!==o&&o.length?(0,j.OQ)(p.props.selected.geometry):[];p.validateText(a,i)||""!==i?p.props.onChangeText(i,a.map(j.bh)):(p.props.onChangeText("",a.map(j.bh)),p.props.onSetInvalidSelected("text",a.map(j.bh)))},type:"text"})))),o().createElement(c.Nav,{bsStyle:"tabs",activeKey:this.state.tabValue,justified:!0},this.isMeasureEditDisabled()&&o().createElement(c.NavItem,{key:"coordinates",eventKey:"coordinates",onClick:function(){p.setTabValue("coordinates"),p.props.onStyleGeometry(!1)}},o().createElement(g.Z,{msgId:"annotations.tabCoordinates"})),o().createElement(c.NavItem,{key:"style",eventKey:"style",onClick:function(){p.setTabValue("style"),p.props.onStyleGeometry(!0)}},o().createElement(g.Z,{msgId:"annotations.tabStyle"}))),o().createElement("div",{className:"tab-container"},"coordinates"===this.state.tabValue&&o().createElement(vn,{options:this.props.config&&this.props.config.geometryEditorOptions,drawing:this.props.drawing,aeronauticalOptions:this.props.aeronauticalOptions,selected:this.props.selected,featureType:this.props.featureType,format:this.props.format,mapProjection:this.props.mapProjection,onChange:this.props.onChangeSelected,onChangeRadius:this.props.onChangeRadius,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:"annotations"}),"style"===this.state.tabValue&&o().createElement(zt,{onChangeStyle:function(e){p.props.onSetStyle(e),p.props.onSetUnsavedStyle(!0),p.props.onSetUnsavedChanges(!0)},pointType:this.props.pointType,style:this.props.selected&&this.props.selected.style||this.props.editing.style,width:this.props.width,symbolsPath:this.props.symbolsPath,onSetErrorSymbol:this.props.onSetErrorSymbol,symbolErrors:this.props.symbolErrors,onUpdateSymbols:this.props.onUpdateSymbols,symbolList:this.props.symbolList,defaultShape:this.props.defaultShape,defaultShapeSize:this.props.defaultShapeSize,defaultShapeFillColor:this.props.defaultShapeFillColor,defaultShapeStrokeColor:this.props.defaultShapeStrokeColor,defaultStyles:this.props.defaultStyles,lineDashOptions:this.props.lineDashOptions,markersOptions:this.getConfig(),textRotationStep:this.props.textRotationStep}))))}}])&&kn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);An(_n,"displayName","AnnotationsEditor"),An(_n,"propTypes",{id:s().string,onEdit:s().func,onCancelEdit:s().func,onCancelStyle:s().func,onCleanHighlight:s().func,onHighlight:s().func,onAddText:s().func,onCancel:s().func,onConfirmDeleteFeature:s().func,onRemove:s().func,onSave:s().func,onSaveStyle:s().func,onError:s().func,onAddGeometry:s().func,onToggleUnsavedChangesModal:s().func,onToggleUnsavedGeometryModal:s().func,onToggleUnsavedStyleModal:s().func,onToggleDeleteFtModal:s().func,onSetUnsavedChanges:s().func,onSetUnsavedStyle:s().func,onChangeProperties:s().func,onChangeSelected:s().func,onConfirmClose:s().func,onCancelRemove:s().func,onConfirmRemove:s().func,onChangeRadius:s().func,onChangeText:s().func,onChangeGeometryTitle:s().func,onCancelClose:s().func,onSetInvalidSelected:s().func,onDeleteGeometry:s().func,onAddNewFeature:s().func,onStyleGeometry:s().func,onResetCoordEditor:s().func,onHighlightPoint:s().func,onSetStyle:s().func,onStartDrawing:s().func,onZoom:s().func,editing:s().object,editedFields:s().object,drawingText:s().object,drawing:s().bool,unsavedChanges:s().bool,unsavedGeometry:s().bool,unsavedStyle:s().bool,mouseHoverEvents:s().bool,coordinateEditorEnabled:s().bool,styling:s().bool,closing:s().bool,removing:s().bool,errors:s().object,stylerType:s().string,featureType:s().string,showBack:s().bool,showEdit:s().bool,showUnsavedChangesModal:s().bool,showUnsavedStyleModal:s().bool,showDeleteFeatureModal:s().bool,showUnsavedGeometryModal:s().bool,config:s().object,feature:s().object,features:s().object,selected:s().object,mode:s().string,maxZoom:s().number,width:s().number,onDownload:s().func,onChangeFormat:s().func,onSelectFeature:s().func,mapProjection:s().string,format:s().string,aeronauticalOptions:s().object,onDeleteFeature:s().func,pointType:s().string,symbolsPath:s().string,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,symbolErrors:s().array,lineDashOptions:s().array,symbolList:s().array,defaultShape:s().string,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,textRotationStep:s().number,onSetAnnotationMeasurement:s().func,onFilterMarker:s().func,annotations:s().array,measurementAnnotationEdit:s().bool,geodesic:s().bool,onHideMeasureWarning:s().func,showAgain:s().bool,showPopupWarning:s().bool,onToggleShowAgain:s().func,onInitPlugin:s().func,onGeometryHighlight:s().func,onUnSelectFeature:s().func}),An(_n,"defaultProps",{config:Yt,errors:{},selected:null,editedFields:{},showBack:!1,showEdit:!0,coordinateEditorEnabled:!1,feature:{},maxZoom:18,format:"decimal",pointType:"marker",stylerType:"marker",annotations:[],measurementAnnotationEdit:!1,geodesic:!0,onInitPlugin:function(){}});const Dn=_n;var In=n(49995),Gn=n.n(In),Nn=n(3674),Zn=n.n(Nn),Un=n(52628),Bn=n.n(Un),Ln=n(65539),Vn=n(38064),zn=n(32425),Wn=n(82702),qn=n(55033),Hn=n.n(qn),Yn=n(72986),Xn=n.n(Yn),Qn=n(89077),$n=n(94745);function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function Jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tr(e,t)}function nr(e,t){if(t&&("object"===Kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rr(e)}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function or(e){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},or(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tr(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=or(r);if(i){var n=or(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nr(this,e)});function l(){var e;Jn(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ir(rr(e=a.call.apply(a,[this].concat(n))),"state",{override:!1,loading:!1}),ir(rr(e),"renderError",(function(){return o().createElement("div",{className:"ms-alert-center text-center"},o().createElement("div",{className:"alert alert-danger",role:"alert",style:{margin:15,flex:1}},o().createElement(g.Z,{msgId:e.state.error})))})),ir(rr(e),"setError",(function(){e.setState((function(){return{error:e.props.errorMessage,loading:!1}}))})),ir(rr(e),"checkfile",(function(t){e.setState((function(){return{loading:!0}})),Wn.Promise.all(t.map((function(e){return(0,Qn.UC)(e)}))).then((function(t){e.state.error&&e.setState((function(){return{error:null}}));var n=t.filter((function(e){var t=e.geoJSON,n=e.errors;return 0===(void 0===n?[]:n).length||t.type===j.Mc})).reduce((function(e,t){var n=t.geoJSON;return e.concat(n.features||n)}),[]);if(0===n.length)throw new Error;e.props.onFileChoosen(n,e.state.override),e.setState((function(){return{loading:!1}})),e.props.onClose()})).catch((function(){e.setError()}))})),e}return t=l,(n=[{key:"render",value:function(){var e=this;return o().createElement($n.Z,{title:this.props.title,bodyClassName:"ms-flex",show:this.props.show,showClose:!0,onClose:this.props.onClose,size:"sm"},o().createElement("div",{className:"",style:{flexDirection:"column"}},this.state.error&&this.renderError(),o().createElement(Hn(),{onDropRejected:this.checkfile,rejectClassName:"ms-alert ms-alert-center text-center alert-danger",className:"ms-alert ms-alert-center text-center",onDrop:this.checkfile},o().createElement("div",{className:"alert alert-info",role:"alert",style:{margin:15,flex:1}},this.state.loading&&o().createElement(Xn(),{spinnerName:"circle",overrideSpinnerClassName:"spinner"}),this.props.text)),o().createElement("div",{style:{margin:15,flex:1}},o().createElement(c.Checkbox,{disabled:this.props.disableOvveride,checked:this.state.override,onChange:function(){return e.setState((function(){return{override:!e.state.override}}))}},o().createElement(g.Z,{msgId:"annotations.loadoverride"})))))}}])&&er(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);ir(ar,"propTypes",{show:s().bool,text:s().oneOfType([s().string,s().element]),onFileChoosen:s().func,error:s().oneOfType([s().string,s().element]),errorMessage:s().string,onClose:s().func,title:s().node,closeGlyph:s().string,disableOvveride:s().bool}),ir(ar,"contextTypes",{messages:s().object}),ir(ar,"defaultProps",{show:!1,text:o().createElement(g.Z,{msgId:"annotations.selectfiletext"}),onFileChoosen:function(){},onClose:function(){},closeGlyph:"",errorMessage:"annotations.loaderror",title:o().createElement(g.Z,{msgId:"annotations.loadtitle"}),disableOvveride:!1});const lr=ar;var sr=n(38560);function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur.apply(this,arguments)}function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mr(e,t)}function gr(e,t){if(t&&("object"===cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hr(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},br(e)}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=br(r);if(i){var n=br(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gr(this,e)});function s(){var e;dr(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vr(hr(e=l.call.apply(l,[this].concat(n))),"state",{selectFile:!1}),vr(hr(e),"getConfig",(function(){return a()({},Yt,e.props.config)})),vr(hr(e),"renderField",(function(t,n){return o().createElement("div",{className:"mapstore-annotations-panel-card-"+t.name},e.renderFieldValue(t,n))})),vr(hr(e),"renderFieldValue",(function(e,t){var n,r,o=t.properties[e.name]||"";return"html"===e.type?(null===(n=(new DOMParser).parseFromString(o,"text/html").documentElement.lastElementChild)||void 0===n||null===(r=n.firstChild)||void 0===r?void 0:r.textContent)||"":o})),vr(hr(e),"renderThumbnail",(function(t){var n=t.featureType,r=t.geometry,i=t.properties,a=void 0===i?{}:i;return"Measure"===(null==a?void 0:a.type)?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(c.Glyphicon,{glyph:"1-ruler"})):"LineString"===n||"MultiLineString"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(c.Glyphicon,{glyph:"polyline"}),";"):"Polygon"===n||"MultiPolygon"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(c.Glyphicon,{glyph:"polygon"}),";"):"Circle"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(c.Glyphicon,{glyph:"1-circle"}),";"):"GeometryCollection"===n||"FeatureCollection"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},(!!(r.geometries||r.features||[]).filter((function(e){return"MultiPoint"!==e.type})).length||a.textValues&&a.textValues.length)&&e.getGeomsThumbnail(r)):o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(c.Glyphicon,{glyph:"point"}),";")})),vr(hr(e),"renderItems",(function(t){var n=t.features,r=t.properties,i={onMouseEnter:function(){e.props.onHighlight(r.id)},onMouseLeave:e.props.onCleanHighlight,onClick:function(){return e.props.onEdit(r.id)}},l=!(r&&!O()(r.visibility))||r.visibility;return fr(fr({},e.getConfig().fields.reduce((function(n,r){return a()({},n,vr({},r.name,e.renderField(r,t)))}),{})),{},{preview:e.renderThumbnail({featureType:"FeatureCollection",geometry:{features:n},properties:r}),tools:o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md no-border"},btnGroupProps:{style:{margin:10}},buttons:[{glyph:"zoom-to",tooltipId:"annotations.zoomTo",onClick:function(n){n.stopPropagation();var r=Qt()(t);e.props.onZoom(r,"EPSG:4326",e.props.maxZoom)}},{glyph:l?"eye-open":"eye-close",tooltipId:l?"annotations.hide":"annotations.show",onClick:function(t){t.stopPropagation(),e.props.onToggleVisibility(null==r?void 0:r.id)}}]})},i)})),vr(hr(e),"renderCards",(function(){if(e.props.loading)return o().createElement("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}},o().createElement(zn.Z,{size:250}));if("list"===e.props.mode){var t=!!e.props.annotations.length;return o().createElement(o().Fragment,null,o().createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"},className:"text-center"},o().createElement(M.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"upload",tooltip:o().createElement(g.Z,{msgId:"annotations.loadtooltip"}),visible:"list"===e.props.mode,onClick:function(){e.setState((function(){return{selectFile:!0}}))}},{glyph:"plus",tooltip:o().createElement(g.Z,{msgId:"annotations.add"}),visible:"list"===e.props.mode,onClick:function(){e.props.onAdd()}},{glyph:"download",disabled:!t,tooltip:o().createElement(g.Z,{msgId:"annotations.downloadtooltip"}),visible:"list"===e.props.mode,onClick:function(){e.props.onDownload()}}]})),o().createElement("div",{style:{padding:"0 8px",margin:"10px 0 0"}},o().createElement(ue.Z,{filterPlaceholder:(0,vt.S$)(e.context.messages,"annotations.filter"),filterText:e.props.filter,onFilter:e.props.onFilter})),o().createElement("div",{id:"ms-annotations-panel-card",className:!t&&"annotations-empty-panel"},!t&&o().createElement(g.Z,{msgId:"annotations.empty"}),t&&o().createElement(Vn.Z,{size:"sm",items:e.props.annotations&&e.props.annotations.filter(e.applyFilter).map((function(t){return e.renderItems(t)}))})))}var n=e.props.annotations&&v()(e.props.annotations.filter((function(t){return t.properties.id===e.props.current}))),r=e.props.editor;return"detail"===e.props.mode?o().createElement(r,ur({feature:n,geodesic:e.props.geodesic,showBack:!0,id:e.props.current,config:e.props.config,width:e.props.width},n.properties)):e.props.editing&&o().createElement(r,ur({feature:n,id:e.props.editing.properties&&e.props.editing.properties.id||q()(),width:e.props.width,config:e.props.config},e.props.editing.properties,{lineDashOptions:e.props.lineDashOptions,symbolsPath:e.props.symbolsPath,onUpdateSymbols:e.props.onUpdateSymbols,onSetErrorSymbol:e.props.onSetErrorSymbol,symbolErrors:e.props.symbolErrors,symbolList:e.props.symbolList,defaultShape:e.props.defaultShape,defaultShapeSize:e.props.defaultShapeSize,defaultShapeFillColor:e.props.defaultShapeFillColor,defaultShapeStrokeColor:e.props.defaultShapeStrokeColor,defaultStyles:e.props.defaultStyles,textRotationStep:e.props.textRotationStep,annotations:e.props.annotations,measurementAnnotationEdit:e.props.measurementAnnotationEdit,geodesic:e.props.geodesic}))})),vr(hr(e),"applyFilter",(function(t){return!e.props.filter||e.getConfig().fields.reduce((function(n,r){return-1!==(t.properties[r.name]||"").toUpperCase().indexOf(e.props.filter.toUpperCase())||n}),!1)})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.onLoadDefaultStyles(this.props.defaultShape,this.props.defaultShapeSize,this.props.defaultShapeFillColor,this.props.defaultShapeStrokeColor,this.props.symbolsPath)}},{key:"getGeomsThumbnail",value:function(e){var t,n,r=null==e?void 0:e.features.reduce((function(e,t){return t.properties&&t.properties.isCircle?fr(fr({},e),{},{Circle:!0}):t.properties&&t.properties.isText?fr(fr({},e),{},{Text:!0}):fr(fr({},e),{},vr({},t.geometry.type,!0))}),{Circle:!1,Text:!1});if((null===(t=Gn()(Bn()(r)))||void 0===t?void 0:t.true)>1)n="geometry-collection";else{var i,a=Zn()(r).find((function(e){return!0===r[e]}));n=null===(i=(0,j.XL)(a))||void 0===i?void 0:i.glyph}return o().createElement(c.Glyphicon,{glyph:n})}},{key:"renderHeader",value:function(){return o().createElement("div",{style:this.props.styling||{width:"100%"}},o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",null,o().createElement(sr.Z,{className:"square-button no-events"},o().createElement(c.Glyphicon,{glyph:"comment"}))),o().createElement("div",{style:{flex:"1 1 0%",padding:8,textAlign:"center"}},o().createElement("h4",null,o().createElement(g.Z,{msgId:"annotations.title"}))),o().createElement("div",null,o().createElement(sr.Z,{className:"square-button no-border",onClick:this.props.toggleControl},o().createElement(c.Glyphicon,{glyph:"1-close"})))))}},{key:"render",value:function(){var e,t=this;return e=this.state.selectFile?o().createElement(lr,{text:o().createElement(g.Z,{msgId:"annotations.selectfiletext"}),onFileChoosen:this.props.onLoadAnnotations,show:this.state.selectFile,disableOvveride:!(this.props.annotations&&this.props.annotations.length>0),onClose:function(){return t.setState((function(){return{selectFile:!1}}))}}):o().createElement("span",null," ",this.renderCards()," "),o().createElement(Ln.Z,{id:this.props.id,header:this.renderHeader()},e)}}])&&yr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);vr(wr,"propTypes",{id:s().string,styling:s().bool,toggleControl:s().func,loading:s().bool,closing:s().bool,showUnsavedChangesModal:s().bool,showUnsavedStyleModal:s().bool,editing:s().object,removing:s().object,onCancelRemove:s().func,onConfirmRemove:s().func,onCancelClose:s().func,onToggleUnsavedChangesModal:s().func,onToggleUnsavedStyleModal:s().func,onResetCoordEditor:s().func,onAddNewFeature:s().func,onToggleUnsavedGeometryModal:s().func,onConfirmClose:s().func,onCancelEdit:s().func,onCancelStyle:s().func,onAdd:s().func,onZoom:s().func,onHighlight:s().func,onCleanHighlight:s().func,onDetail:s().func,mode:s().string,editor:s().func,annotations:s().array,current:s().string,config:s().object,filter:s().string,onFilter:s().func,classNameSelector:s().func,width:s().number,onDownload:s().func,onLoadAnnotations:s().func,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,onToggleVisibility:s().func,onEdit:s().func,symbolErrors:s().array,lineDashOptions:s().array,symbolList:s().array,defaultShape:s().string,symbolsPath:s().string,maxZoom:s().number,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,onLoadDefaultStyles:s().func,textRotationStep:s().number,measurementAnnotationEdit:s().bool,geodesic:s().bool}),vr(wr,"contextTypes",{messages:s().object}),vr(wr,"defaultProps",{mode:"list",config:Yt,classNameSelector:function(){return""},toggleControl:function(){},onUpdateSymbols:function(){},onSetErrorSymbol:function(){},onLoadAnnotations:function(){},annotations:[],maxZoom:18,onLoadDefaultStyles:function(){}});const Er=wr;var Sr=n(86267),Or=n(68898),Cr=n(21914),Pr=n(4206),jr=n(42780),Tr=n(12571),kr=n.n(Tr),xr=n(55877),Mr=n.n(xr);function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r=function(e,t){switch(t){case"Polygon":return[e];case"LineString":case"MultiPoint":return e;default:return e[0]}};var Dr=n(49977),Ir=n.n(Dr),Gr=n(78598),Nr=n(81808),Zr=n(80416),Ur=n(89602),Br=n(97395),Lr=n(33528),Vr=n(31255),zr=n(7147),Wr=n(75110),qr=n(827),Hr=n(93152),Yr=n(7877);function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $r=(0,u.P1)([Wr.l2],(function(e){return v()(e.filter((function(e){return"annotations"===e.id})))})),Kr=function(e){return en()(e,"annotations.config.multiGeometry",!1)},Jr=function(e){return en()(e,"annotations.removing")},eo=function(e){return en()(e,"annotations.format")},to=function(e){return en()(e,"annotations.aeronauticalOptions")},no=function(e){return en()(e,"annotations.showUnsavedChangesModal",!1)},ro=function(e){return en()(e,"annotations.showUnsavedStyleModal",!1)},oo=function(e){return en()(e,"annotations.showUnsavedGeometryModal",!1)},io=function(e){return en()(e,"annotations.showDeleteFeatureModal",!1)},ao=function(e){return!!en()(e,"annotations.closing")},lo=function(e){return en()(e,"annotations.editing")},so=function(e){return en()(e,"annotations.editGeometry",!0)},co=function(e){return en()(e,"annotations.featureType")},uo=function(e){return en()(e,"annotations.coordinateEditorEnabled")},po=function(e){return!!en()(e,"annotations.drawing")},fo=function(e){return en()(e,"annotations.stylerType")},yo=function(e){return en()(e,"annotations.drawingText")},mo=function(e){return en()(e,"annotations.editedFields",{})},go=function(e){return!!en()(e,"annotations.styling")},ho=function(e){return en()(e,"annotations.selected",null)},bo=function(e){return en()(e,"annotations.unsavedChanges",!1)},vo=function(e){return en()(e,"annotations.unsavedGeometry",!1)},wo=function(e){return en()(e,"annotations.unsavedStyle",!1)},Eo=function(e){return en()(e,"annotations.validationErrors",{})},So=function(e){return en()(e,"annotations.config",{})},Oo=function(e){return en()(e,"annotations.symbolList",[])},Co=function(e){return en()(e,"annotations.symbolErrors",[])},Po=function(e){return(lo(e)?"editing":$r(e)&&function(e){return en()(e,"annotations.current")}(e)&&"detail")||"list"},jo=function(e){return en()(e,"annotations.showAgain",!1)},To=function(e){return en()(e,"annotations.showPopupWarning",!0)},ko=function(e){return a()({},{symbolErrors:Co(e),showEdit:(0,Hr.m6)(e),canEdit:so(e),mouseHoverEvents:(0,Yr.Qp)(e),closing:ao(e),format:eo(e)||(0,fe.u8)("defaultCoordinateFormat"),aeronauticalOptions:to(e),config:So(e),drawing:po(e),drawingText:yo(e),errors:Eo(e),editing:lo(e),coordinateEditorEnabled:uo(e),editedFields:mo(e),mode:Po(e),selected:ho(e),featureType:co(e),removing:Jr(e),mapProjection:(0,qr.uy)(e),showUnsavedChangesModal:no(e),showDeleteFeatureModal:io(e),showUnsavedGeometryModal:oo(e),showUnsavedStyleModal:ro(e),stylerType:fo(e),styling:go(e),unsavedChanges:bo(e),unsavedGeometry:vo(e),unsavedStyle:wo(e),symbolList:Oo(e),showAgain:jo(e),showPopupWarning:To(e)})},xo=(0,u.P1)([ko,function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){Qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},$r,Po],(function(e,t,n,r){return a()({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,selected:e.selected,filter:t.filter||"",defaultStyles:t.defaultStyles,loading:t.loading},e.config?{config:e.config}:{})})),Mo=((0,u.P1)([xo],(function(e){var t=e.current;return{annotation:v()(e.annotations.filter((function(e){return e.properties.id===t})))}})),n(70898)),Ro=n.n(Mo),Fo=["symbolUrlCustomized"],Ao=["style"];function _o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Do(e){return function(e){if(Array.isArray(e))return Io(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Io(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Go(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bo=function(e){var t=e.features.map((function(e){var t=[];return e.geometry?(t="LineString"===e.geometry.type||"MultiPoint"===e.geometry.type?e.geometry.coordinates.filter(j.qs):"Polygon"===e.geometry.type?e.geometry.coordinates[0]?[e.geometry.coordinates[0].filter(j.qs)]:[[]]:(t=[e.geometry.coordinates].filter(j.qs)).length?t[0]:[],(0,H.t8)("geometry.coordinates",t,e)):e}));return(0,H.t8)("features",t,e)},Lo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Circle";return"Circle"===t&&en()(e.annotations,"config.geodesic",!1)},Vo=function(e){var t=e.annotations.editing,n={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr(e),editEnabled:!1,selectEnabled:!0,drawEnabled:!1,translateEnabled:!1,transformToFeatureCollection:!0,geodesic:Lo(e,e.draw.drawMethod)};return t=Bo(t),(0,Pr.Yf)("drawOrEdit",e.draw.drawMethod,j.jB,[t],n,a()({},t.style,{highlight:!1}))},zo=function(e){var t=e.annotations.editing,n={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr(e),editEnabled:!0,selectEnabled:!1,drawEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},translateEnabled:!1,addClickCallback:!0,useSelectedStyle:!0,transformToFeatureCollection:!0,geodesic:Lo(e,e.draw.drawMethod)};return t=Bo(t),(0,Pr.Yf)("drawOrEdit",e.draw.drawMethod,j.jB,[t],n,t.style)},Wo=function e(t){return"FeatureCollection"===t[0].type?t[0]:t.reduce((function(t,n){return"Empty"===t.type?"FeatureCollection"===n.type?e(n.features):n.geometry:"Point"===t.type?{type:"MultiPoint",coordinates:[t.coordinates,n.geometry.coordinates]}:{type:"MultiPoint",coordinates:t.coordinates.concat([n.geometry.coordinates])}}),{type:"Empty"})},qo=function(e){return{type:"FeatureCollection",properties:a()({},e.properties,e.fields,{id:e.id},{visibility:!0}),features:e.geometry,style:a()({},e.style,{highlight:!1})}},Ho=n(1550),Yo=n(55105);function Xo(e){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}function Qo(){return Qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qo.apply(this,arguments)}function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jo(e,t){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jo(e,t)}function ei(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ti(e){return ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ti(e)}function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ii={onUpdateSymbols:jr.z_,onSetErrorSymbol:jr.Y5,onEdit:jr.VR,onCancelEdit:jr.QD,onChangeFormat:jr.Zw,onConfirmDeleteFeature:jr.pv,onCleanHighlight:jr.Rx,onHighlightPoint:jr.aS,onHighlight:jr.CH,onError:jr.Bp,onSave:jr.xD,onRemove:jr._x,onAddGeometry:jr.kg,onAddText:jr.F4,onSetUnsavedChanges:jr.if,onSetUnsavedStyle:jr.tp,onChangeProperties:jr.Om,onToggleDeleteFtModal:jr.Ay,onToggleUnsavedChangesModal:jr.ts,onToggleUnsavedGeometryModal:jr.UJ,onToggleUnsavedStyleModal:jr.yw,onAddNewFeature:jr.TA,onResetCoordEditor:jr.nz,onStyleGeometry:jr.ob,onCancelStyle:jr.nk,onChangeSelected:jr.i9,onSaveStyle:jr.ob,onSetStyle:jr.A_,onStartDrawing:jr.y$,onDeleteGeometry:jr.dT,onZoom:Ho.Px,onSelectFeature:Pr.KD,onChangeRadius:jr.om,onSetInvalidSelected:jr.$f,onChangeText:jr.XW,onChangeGeometryTitle:jr.Dd,onCancelRemove:jr.iY,onCancelClose:jr.Hl,onConfirmClose:jr.L0,onConfirmRemove:jr.jw,onDownload:jr.LR,onFilterMarker:jr.TW,onGeometryHighlight:jr.$,onSetAnnotationMeasurement:Ur.pO,onHideMeasureWarning:jr.Y_,onToggleShowAgain:jr.Ib,onInitPlugin:jr.QT,onUnSelectFeature:jr.RC},ai=(0,m.$j)(ko,ri({onCancel:jr.l7},ii))(Dn),li=(0,m.$j)(ko,ri(ri({},ii),{},{onEdit:jr.bM}))(Dn),si=(0,u.P1)([xo],(function(e){return ri(ri({},e),{},{editor:ai})})),ci=(0,m.$j)(si,{onCancelRemove:jr.iY,onCancelStyle:jr.nk,onCancelEdit:jr.QD,onToggleUnsavedChangesModal:jr.ts,onToggleUnsavedStyleModal:jr.yw,onToggleUnsavedGeometryModal:jr.UJ,onConfirmRemove:jr.jw,onToggleVisibility:jr.r1,onCancelClose:jr.Hl,onConfirmClose:jr.L0,onAdd:jr.A9,onEdit:jr.VR,onHighlight:jr.CH,onCleanHighlight:jr.Rx,onDetail:jr.MQ,onFilter:jr.VP,onDownload:jr.LR,onZoom:Ho.Px,onLoadAnnotations:jr.wP,onLoadDefaultStyles:jr.pI})(Er),ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jo(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ti(r);if(i){var n=ti(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ei(this,e)});function l(){return $o(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this;return this.props.active?o().createElement(d.Z,null,(function(t){var n=t.width;return o().createElement("span",{className:"ms-annotations-panel react-dock-no-resize ms-absolute-dock ms-side-panel"},o().createElement(y.default,Qo({fluid:!0,dockStyle:e.props.dockStyle},e.props.dockProps,{isVisible:e.props.active,size:e.props.width/n>1?1:e.props.width/n}),o().createElement(ci,Qo({},e.props,{width:e.props.width}))))})):null}}])&&Ko(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);oi(ui,"propTypes",{id:s().string,active:s().bool,wrap:s().bool,wrapWithPanel:s().bool,panelStyle:s().object,panelClassName:s().string,toggleControl:s().func,closeGlyph:s().string,buttonStyle:s().object,style:s().object,dockProps:s().object,width:s().number}),oi(ui,"defaultProps",{id:"mapstore-annotations-panel",active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"annotations-panel",toggleControl:function(){},closeGlyph:"1-close",width:330,dockProps:{dimMode:"none",size:.3,fluid:!0,position:"right",zIndex:1030},dockStyle:{}});var pi=h.on.bind(null,(0,h.Xi)("annotations",null),(function(e){return!(e.controls&&e.controls.annotations&&e.controls.annotations.enabled&&e.annotations&&e.annotations.editing)}),jr.g),fi=(0,u.P1)([function(e){return e.controls&&e.controls.annotations&&e.controls.annotations.enabled||e.annotations&&e.annotations.closing||!1},function(e){return(0,Yo.ic)(e,{height:!0})},xo],(function(e,t,n){return{active:e,dockStyle:t,width:f()(null==n?void 0:n.selected)?330:660}})),di=(0,m.$j)(fi,{toggleControl:pi})(ui);const yi=(0,m.rx)("Annotations",{component:a()(di,{disablePluginIf:"{state('mapType') === 'cesium' || state('mapType') === 'leaflet' }"},{BurgerMenu:{name:"annotations",position:40,text:o().createElement(g.Z,{msgId:"annotationsbutton"}),icon:o().createElement(c.Glyphicon,{glyph:"comment"}),action:pi,priority:2,doNotHide:!0}}),reducers:{annotations:function(){var e,t,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{validationErrors:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case jr.Xp:try{return Fr(Fr({},o),{},{showPopupWarning:null===(0,wn.ac)().getItem("showPopupWarning")||"true"===(0,wn.ac)().getItem("showPopupWarning")})}catch(e){return console.error(e),o}case jr.Kz:var l,s=(0,H.t8)("unsavedGeometry",!0,o),c=i.coordinates,u=i.radius,p=i.text,f=U()(o.editing.features,(function(e){return e.properties.id===o.selected.properties.id})),d=-1===f?{type:"Feature",geometry:{type:o.selected.geometry.type},properties:Fr({},o.selected.properties)}:a()({},o.editing.features[f]);(d.geometry&&!d.geometry.type||!d.geometry)&&(d=(0,H.t8)("geometry.type",o.selected.geometry.type,d)),L()(c)||(l=c,d.geometry.type,d=a()({},d,{geometry:a()({},d.geometry,{coordinates:_r(l,d.geometry.type)})}));var y,m=a()({},d);if(m.properties.isCircle){var g,b=L()(c)?o.selected.properties.center:l[0];m=a()({},Fr(Fr({},m),{},{properties:Fr(Fr({},o.selected.properties),{},{center:b,radius:L()(u)?m.properties.radius:u})})),y=o.editing.features.map((function(e){return e.properties.id===o.selected.properties.id?m:e})),m=Fr(Fr({},m),{},{geometry:{coordinates:b,type:"Circle"}});var w={type:"Polygon",coordinates:[[[]]]};(0,j.qs)(m.properties.center)?(g=m.properties.center,w=(0,Or.Z)(g,"EPSG:4326"===i.crs?i.radius:i.radius/1e3,{steps:100,units:"EPSG:4326"===i.crs?"degrees":"kilometers"}).geometry):m=(0,H.t8)("properties.center",[],m),m=(0,H.t8)("properties.polygonGeom",w,m)}else if(m.properties.isText){var E=L()(c)?o.selected.geometry.coordinates:l[0];m=a()({},Fr(Fr({},m),{},{properties:Fr(Fr({},o.selected.properties),{},{valueText:L()(p)?o.selected.properties.valueText:p})})),y=o.editing.features.map((function(e){return e.properties.id===o.selected.properties.id?m:e})),m=Fr(Fr({},m),{},{geometry:{coordinates:E,type:"Point"}})}else y=o.editing.features.map((function(e){return e.properties.id===o.selected.properties.id?m:e})),m=Fr(Fr({},m),{},{geometry:Fr(Fr({},m.geometry),{},{coordinates:_r(L()(c)?m.geometry.coordinates:c,m.geometry.type)})});return m=(0,H.t8)("properties.isValidFeature",(0,j._n)({properties:m.properties,components:(0,j.OQ)(m.geometry),type:m.geometry.type}),m),a()({},s,{editing:Fr(Fr({},s.editing),{},{features:y}),selected:m,unsavedChanges:!0});case Pr.iU:var S=o,O=v()(i.features)||null;if(!O)return o;(O=(0,H.t8)("properties.canEdit",!0,O))&&O.properties&&O.properties.isCircle&&(O=(0,H.t8)("geometry.coordinates",O.properties.center,O),O=(0,H.t8)("geometry.type","Circle",O)),O&&O.properties&&O.properties.isText&&(O=(0,H.t8)("geometry.type","Text",O));var C=U()(o.editing.features,(function(e){return e.properties.id===O.properties.id})),P=O;return O&&O.properties&&O.properties.isCircle?P=(0,H.t8)("geometry",O.properties.polygonGeom,P):O&&O.properties&&O.properties.isText&&(P=(0,H.t8)("geometry.type","Point",P)),S=(0,H.t8)("editing.features",o.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o),S=(0,H.t8)("editing.tempFeatures",S.editing.features,S),S=(0,H.t8)("editing",(0,j.Rj)(S.editing,{highlight:!1}),S),-1===C?S=(0,H.t8)("editing.features",S.editing.features.concat([P]),S):(P=(0,H.t8)("style",_()(S.editing.features[C].style).map((function(e){return Fr(Fr({},e),{},{highlight:!0})})),P),S=(0,H.t8)("editing.features[".concat(C,"]"),P,S),O=(0,H.t8)("style",S.editing.features[C].style,O)),a()({},S,{selected:O,coordinateEditorEnabled:!!O,featureType:O.geometry.type});case Pr.W7:var T=v()(i.features)||null;T=(0,H.t8)("style",o.selected.style,T);var k=o;T&&T.properties&&T.properties.isCircle?(T=(0,H.t8)("properties.polygonGeom",T.geometry,T),T=(0,H.t8)("geometry",{coordinates:T.properties.center,type:"Circle"},T)):T&&T.properties&&T.properties.isText&&(T=(0,H.t8)("geometry.type","Text",T)),T=(0,H.t8)("properties.isValidFeature",(0,j._n)({properties:T.properties,components:(0,j.OQ)(T.geometry),type:T.geometry.type}),T),T=(0,H.t8)("properties.canEdit",!0,T),k=(0,H.t8)("editing.features",o.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o);var x=U()(o.editing.features,(function(e){return e.properties.id===T.properties.id})),M=T;return T&&T.properties&&T.properties.isCircle?M=(0,H.t8)("geometry",T.properties.polygonGeom,M):T&&T.properties&&T.properties.isText&&(M=(0,H.t8)("geometry.type","Point",M)),k=(0,H.t8)("unsavedGeometry",!0,k),k=-1===x?(0,H.t8)("editing.features",k.editing.features.concat([M]),k):(0,H.t8)("editing.features[".concat(x,"]"),M,k),a()({},k,{selected:T,unsavedChanges:!0,stylerType:v()((0,j.Gk)((0,j.qS)(T.geometry)))});case jr.DX:return a()({},o,{removing:i.id});case jr.JT:var R,F=(0,H.t8)("properties.radius",i.radius,o.selected);if(0===i.components.length||null===i.radius)return F=(0,H.t8)("properties.isValidFeature",!1,F),a()({},o,{selected:F,unsavedChanges:!0});F=(0,H.t8)("properties.isValidFeature",(0,j._n)({properties:F.properties,components:(0,j.OQ)({coordinates:i.components[0]||[],type:"Circle"}),type:"Circle"}),F),F=(0,H.t8)("properties.center",i.components[0],F),F=(0,H.t8)("geometry.coordinates",i.components[0],F);var A=(0,Or.Z)(F.properties.center,"EPSG:4326"===i.crs?i.radius:i.radius/1e3,{steps:100,units:"EPSG:4326"===i.crs?"degrees":"kilometers"});F=(0,H.t8)("properties.polygonGeom",A.geometry,F);var D=U()(o.editing.features,(function(e){return e.properties.id===o.selected.properties.id})),I=(0,H.t8)("geometry",F.properties.polygonGeom,F);return R=(0,H.t8)("editing.features",o.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o),R=(0,H.t8)("unsavedGeometry",!0,R),R=-1===D?(0,H.t8)("editing.features",R.editing.features.concat([I]),R):(0,H.t8)("editing.features[".concat(D,"]"),I,R),a()({},R,{selected:F,unsavedChanges:!0});case jr.CO:var G,N=(0,H.t8)("properties.valueText",i.text,o.selected);N=(0,H.t8)("style[0].label",i.text,N),N=(0,H.t8)("properties.isValidFeature",(0,j._n)({properties:N.properties,components:(0,j.OQ)({coordinates:i.components[0]||[],type:"Text"}),type:"Text"}),N),N=(0,H.t8)("properties.isText",!0,N),N=(0,H.t8)("geometry.coordinates",i.components[0]||[[]],N);var Z=U()(o.editing.features,(function(e){return e.properties.id===o.selected.properties.id})),B=(0,H.t8)("geometry.type","Point",N);return G=(0,H.t8)("editing.features",o.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o),G=(0,H.t8)("unsavedGeometry",!0,G),G=-1===Z?(0,H.t8)("editing.features",G.editing.features.concat([B]),G):(0,H.t8)("editing.features[".concat(Z,"]"),B,G),a()({},G,{selected:N,unsavedChanges:!0});case jr.gT:var V=(0,H.t8)("editing.features",o.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o),z=V.editing.features,W=V.editing.tempFeatures;return"Circle"!==o.featureType&&o.drawing&&(W=kr()(z,0,z.length-1)),a()({},V,{editing:Fr(Fr({},V.editing),{},{features:W}),drawing:!1,coordinateEditorEnabled:!1,unsavedGeometry:!1,selected:null,showUnsavedGeometryModal:!1});case jr.cv:var q=o.editing,Y=o.selected,X=U()(q.features,(function(e){return e.properties.id===Y.properties.id})),Q=q.features[X],$=_()(Q.style).map((function(e){return Fr(Fr({},e),{},{highlight:!1})}));q=(0,H.t8)("features[".concat(X,"]"),(0,H.t8)("style",$,Q),q);var K=(0,H.t8)("editing.features",q.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),o);return a()({},K,{drawing:!1,coordinateEditorEnabled:!1,unsavedGeometry:!1,selected:null,showUnsavedGeometryModal:!1});case jr.NV:var J=o.selected,ee=o;J.properties&&J.properties.isCircle&&(J=(0,H.t8)("geometry",J.properties.polygonGeom,J)),J.properties&&J.properties.isText&&(J=(0,H.t8)("geometry.type","Point",J)),J.properties&&J.properties.useGeodesicLines&&(J=(0,H.t8)("properties.geometryGeodesic",{type:"LineString",coordinates:(0,Sr.transformLineToArcs)(J.geometry.coordinates)},J)),J=(0,H.t8)("properties.canEdit",!1,J);var te=U()(o.editing.features,(function(e){return e.properties.id===o.selected.properties.id}));return-1===te?ee=(0,H.t8)("editing.features",ee.editing.features.concat([J]),ee):(J=(0,H.t8)("style",_()(ee.editing.features[te].style).map((function(e){return Fr(Fr({},e),{},{highlight:!1})})),J),ee=(0,H.t8)("editing.features[".concat(te,"]"),J,ee)),ee=Fr(Fr({},ee=(0,H.t8)("editing.tempFeatures",ee.editing.features,ee)),{},{editing:Fr(Fr({},ee.editing),{},{properties:Fr(Fr({},ee.editing.properties),ee.editedFields)})}),a()({},ee,{coordinateEditorEnabled:!1,drawing:!1,unsavedGeometry:!1,selected:null,config:Fr(Fr({},ee.config),{},{filter:""})});case jr.Ns:if(!i.feature||"FeatureCollection"!==i.feature.type)return o;var ne=(0,H.t8)("features",i.feature.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})),i.feature),re=(0,H.t8)("newFeature",en()(i.feature,"newFeature",!0),(0,H.t8)("properties.canEdit",!1,(0,H.t8)("tempFeatures",ne.features,ne))),oe=(0,H.t8)("editing",re,o);return a()({},oe,{coordinateEditorEnabled:!1,drawing:!1,unsavedGeometry:!1,selected:null,config:Fr(Fr({},oe.config),{},{filter:""})});case jr.Nj:return(0,H.t8)("showDeleteFeatureModal",!o.showDeleteFeatureModal,o);case jr.op:var ie=(0,H.t8)("editing.features",o.editing.features.filter((function(e){return e.properties.id!==o.selected.properties.id})),o);return ie=(0,H.t8)("unsavedChanges",!0,ie),ie=(0,H.t8)("drawing",!1,ie),(0,H.t8)("coordinateEditorEnabled",!1,ie);case jr.eK:return a()({},o,{drawingText:Fr(Fr({},o.drawingText),{},{drawing:!0})});case jr.vG:var ae=(0,H.t8)("properties.isValidFeature",!1,o.selected);switch(i.errorFrom){case"text":ae=(0,H.t8)("properties.valueText",void 0,ae);break;case"radius":ae=(0,H.t8)("properties.radius",void 0,ae);break;case"coords":ae=(0,H.t8)("geometry.coordinates",_r(i.coordinates,ae.geometry.type),ae)}return a()({},o,{selected:ae});case jr.GW:return a()({},o,{removing:i.id,unsavedChanges:!0});case jr.A1:var le=(0,j.KM)(i.feature.features),se=v()(i.feature.features),ce=se&&se.geometry&&se.geometry.type;return se&&se.properties&&se.properties.isCircle&&(ce="Circle"),se&&se.properties&&se.properties.isText&&(ce="Text"),a()({},o,{editing:(0,j.Rj)(a()({},i.feature,{features:le}),{highlight:!1}),stylerType:v()((0,j.Gk)((0,j.qS)(i.feature.geometry||i.feature))),originalStyle:null,featureType:ce});case jr.CD:var ue=Mr().v1();return a()({},o,{editing:{type:"FeatureCollection",id:ue,geometry:null,features:[],newFeature:!0,properties:{id:ue}},selected:{},originalStyle:null});case jr.c4:var pe=(null===(e=o.editing)||void 0===e||null===(t=e.features)||void 0===t?void 0:t.filter((function(e){return e.properties.id!==i.id})))||[],fe=(null==o||null===(n=o.selected)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id)===i.id||!1;return a()({},o,Fr(Fr({removing:null,stylerType:"",current:null},fe&&{selected:null}),{},{editing:o.editing?a()({},o.editing,{features:pe,style:{type:o.featureType}}):null}));case jr.Hf:var de=o,ye=U()(o.editing.features,(function(e){return e.properties.id===o.selected.properties.id})),me=(0,H.t8)("properties.geometryTitle",i.title,o.editing.features[ye]),ge=(0,H.t8)("properties.geometryTitle",i.title,o.selected);return Fr(Fr({},de=(0,H.t8)("editing.features[".concat(ye,"]"),me,de)),{},{selected:ge});case jr.Ne:return a()({},o,{removing:null});case jr.eY:return a()({},o,{closing:!0});case jr.pC:return a()({},o,{unsavedChanges:i.unsavedChanges});case jr.$l:return a()({},o,{unsavedStyle:i.unsavedStyle});case jr.bI:return a()({},o,{closing:!1,coordinateEditorEnabled:!1});case jr.Rr:return a()({},o,{closing:!1});case jr.iO:return a()({},o,{showUnsavedChangesModal:!o.showUnsavedChangesModal});case jr.R_:return a()({},o,{showUnsavedGeometryModal:!!o.unsavedGeometry&&!o.showUnsavedGeometryModal});case jr.qO:return a()({},o,{showUnsavedStyleModal:!o.showUnsavedStyleModal});case jr.zT:return a()({},o,{editedFields:a()({},o.editedFields,Ar({},i.field,i.value))});case jr.hv:return a()({},o,{editing:null,drawing:!1,styling:!1,originalStyle:null,validationErrors:{},editedFields:{},unsavedChanges:!1});case jr.Lv:return a()({},o,{editing:null,current:null,drawing:!1,styling:!1,originalStyle:null,validationErrors:{},editedFields:{},unsavedChanges:!1});case Cr.DZ:return a()({},o,{editing:null,removing:null,validationErrors:{},styling:!1,drawing:!1,originalStyle:null,selected:null,filter:null,unsavedChanges:!1,editedFields:{}});case jr.mA:var he,be,ve,we,Ee,Se=i.featureType||o.featureType,Oe={id:Mr().v1(),isValidFeature:!1,canEdit:!0};"Text"===Se&&(Oe=(0,H.t8)("isText",!0,Oe)),"Circle"===Se&&(Oe=(0,H.t8)("isCircle",!0,Oe),Oe=(0,H.t8)("isDrawing",!0,Oe));var Ce={type:"Feature",geometry:{type:Se,coordinates:(0,j.fo)(Se)},properties:Oe,style:Fr(Fr({},"symbol"===(null===(he=o.config)||void 0===he?void 0:he.defaultPointType)?null===(be=o.defaultStyles)||void 0===be||null===(ve=be.POINT)||void 0===ve?void 0:ve.symbol:null===(we=o.defaultStyles)||void 0===we?void 0:we.POINT.marker),{},{id:Mr().v1()})},Pe=(0,H.t8)("geometry.type","Text"===Se?"Point":"Circle"===Se?"Polygon":Se,Ce);Pe=(0,H.t8)("geometry.coordinates","Circle"===Se?[[]]:[],Pe),Pe=(0,H.t8)("geometry","Point"===Se||"Text"===Se?null:Pe.geometry,Pe);var je=null===(Ee=o.editing.features.filter((function(e){var t,n=e.properties;return(null==n?void 0:n.id)!==(null==Ce||null===(t=Ce.properties)||void 0===t?void 0:t.id)})))||void 0===Ee?void 0:Ee.map((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style=(null==t||null===(e=t.style)||void 0===e?void 0:e.map((function(e){return e.highlight=!1,e})))||[],t})),Te=(0,H.t8)("editing.tempFeatures",je,o);return a()({},o,{drawing:!Te.drawing,featureType:Se,drawingText:{show:!1,drawing:!1},validationErrors:{},coordinateEditorEnabled:!0,editing:a()({},Te.editing,{features:Te.editing.features.map((function(e){return(0,H.t8)("properties.canEdit",!1,e)})).concat([Pe])}),stylerType:v()((0,j.Gk)((0,j.qS)(Ce.geometry))),selected:Ce});case jr.Ge:var ke=i.styling;return Fr(Fr({},o),{},{styling:ke,originalStyle:ke?o.selected&&o.selected.style:o.originalStyle,selected:(0,H.t8)("style",_()(o.selected&&o.selected.style).map((function(e){return Fr(Fr({},e),{},{highlight:!ke})})),o.selected),editing:(0,H.t8)("features",(o.editing&&o.editing.features||[]).map((function(e){return Fr(Fr({},e),{},{style:_()(e.style).map((function(t){return Fr(Fr({},t),{},{highlight:!ke&&e.properties.id===(o.selected&&o.selected.properties.id)})}))})})),o.editing)});case jr.QY:return a()({},o,{validationErrors:i.errors});case jr.sL:var xe=(0,H.t8)("style",i.style,o.selected),Me=U()(o.editing&&o.editing.features,(function(e){return e.properties.id===o.selected.properties.id}));if(-1!==Me){var Re=(0,H.t8)("features[".concat(Me,"].style"),i.style,o.editing);return a()({},o,{selected:xe,editing:Re})}return a()({},o,{selected:xe});case jr.wq:return a()({},o,{current:i.id});case jr.x9:return a()({},o,{current:null});case h.kM:return"annotations"===i.control?a()({},o,{current:null,editing:null,removing:null,validationErrors:{},styling:!1,drawing:!1,coordinateEditorEnabled:!1,filter:null,editedFields:{},originalStyle:null,selected:null}):o;case jr.Fz:return i.point?a()({},o,{clickPoint:{latlng:{lat:i.point.lat,lng:i.point.lon}},showMarker:!0}):Fr(Fr({},o),{},{clickPoint:null,showMarker:!1});case jr.GI:return Fr(Fr({},o),{},{format:i.format});case jr.Cg:return Fr(Fr({},o),{},{symbolList:i.symbols||[]});case jr.bO:return a()({},o,{filter:i.filter});case jr.WD:return Fr(Fr({},o),{},{symbolErrors:i.symbolErrors});case jr.rb:return(0,H.t8)("defaultStyles.".concat(i.path),i.style,o);case jr.br:return(0,H.t8)("loading"===i.name?"loading":"loadFlags.".concat(i.name),i.value,(0,H.t8)("loading",i.value,o));case jr.Ps:return Fr(Fr({},o),{},{config:Fr(Fr({},o.config),{},{filter:i.filter})});case jr.aH:return Fr(Fr({},o),{},{showAgain:!o.showAgain});case jr.U7:return Fr(Fr({},o),{},{showPopupWarning:!1});case jr.Np:return Fr(Fr({},o),{},{config:Fr(Fr({},o.config),{},{geodesic:en()(i.options,"geodesic",!1)})});default:return o}}},epics:(mi=li,{addAnnotationsLayerEpic:function(e,t){return e.ofType(Nr.ok).switchMap((function(){var e=$r(t.getState());if(e){var n=e.visibility,r=void 0!==n&&n,o=e.features,i=(void 0===o?[]:o).map((function(e){return Zo(Zo({},e),{},{style:{},features:(e.features||[]).map((function(t){var n=(t.properties.isCircle?"Circle":t.properties.isText&&"Text")||t.geometry.type,r=[];return"Circle"===n&&r.push(Zo(Zo({},j.z4.Point),{},{iconAnchor:[.5,.5],type:"Point",title:"Center Style",filtering:!1,geometry:"centerPoint"})),"LineString"===n&&r.push((0,j.N_)()),Zo(Zo({},t),{},{style:We()(t.style)?t.style.map((function(e){return e.symbolUrlCustomized,Go(e,Fo)})):[Zo(Zo({},e.style[n]),{},{id:e.style[n].id||q()(),symbolUrlCustomized:void 0})].concat(r)})}))})}));return Ir().Observable.of((0,Zr.tV)(j.jB,"layer",{rowViewer:mi,features:i,style:{},visibility:r}))}return Ir().Observable.empty()}))},editAnnotationEpic:function(e,t){return e.ofType(jr.A1).switchMap((function(){var e,n,r=t.getState(),o=r.annotations.editing,i=r.annotations.featureType,l={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr(r),editEnabled:!1,selectEnabled:!0,drawEnabled:!1,transformToFeatureCollection:!0,geodesic:Lo(r,i)},s=(null===(e=o.properties)||void 0===e?void 0:e.type)===T.zE||!1,c=[(0,jr.r1)(null==o||null===(n=o.properties)||void 0===n?void 0:n.id,!1),(0,Pr.Yf)("drawOrEdit",i,j.jB,[o],l,a()({},o.style,{highlight:!1})),(0,Cr.aN)()];return c=s?c.concat((0,Ur.Bd)({geomType:null})):c,Ir().Observable.from(c)}))},newAnnotationEpic:function(e){return e.ofType(jr.CD).switchMap((function(){return Ir().Observable.from([(0,Cr.aN)()])}))},addAnnotationEpic:function(e,t){return e.ofType(jr.NV).switchMap((function(){var e,n=t.getState().annotations.editing;return Ir().Observable.from([(0,jr.r1)(null==n||null===(e=n.properties)||void 0===e?void 0:e.id,!1),Vo(t.getState()),(0,Cr.aN)()])}))},setEditingFeatureEpic:function(e,t){return e.ofType(jr.Ns).switchMap((function(e){var n=e.feature||{},r=n.properties,o=n.visibility;return Ir().Observable.of((0,jr.r1)(r.id,o),Vo(t.getState()),(0,Cr.aN)())}))},disableInteractionsEpic:function(e,t){return e.ofType(jr.Ge).switchMap((function(){var e,n,r,o=t.getState()&&t.getState().annotations&&t.getState().annotations.styling;return Ir().Observable.from([o?(e=t.getState(),n=e.annotations.editing,r={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr(e),editEnabled:!1,selectEnabled:!1,translateEnabled:!1,drawEnabled:!1,transformToFeatureCollection:!0,geodesic:Lo(e,e.draw.drawMethod)},n=Bo(n),(0,Pr.Yf)("drawOrEdit",e.draw.drawMethod,j.jB,[n],r,n.style)):zo(t.getState())])}))},removeAnnotationEpic:function(e,t){return e.ofType(jr.c4).switchMap((function(e){if("geometry"===e.attribute){var n=t.getState(),r=n.annotations.editing,o=n.annotations.featureType,i={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr(n),editEnabled:!0,drawEnabled:!1,selectEnabled:!0,editFilter:function(e){return e.getProperties().canEdit},useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(n,o)};return Ir().Observable.from([(0,Pr.Yf)("replace",o,j.jB,[r],{}),(0,Pr.Yf)("drawOrEdit",o,j.jB,[r],i,a()({},r.style,{highlight:!1}))])}var l=$r(t.getState()).features.filter((function(t){return t.properties.id!==e.id}));return Ir().Observable.from([(0,Zr.tV)(j.jB,"layer",{features:l}),(0,Cr.aN)(),(0,Cr.g)(),(0,Cr.Mc)()].concat(0===l.length?[(0,Zr.$o)(j.jB)]:[]))}))},openEditorEpic:function(e){return e.ofType(jr.Mf).switchMap((function(e){return Ir().Observable.from([(0,Cr.Mc)(),(0,h.Xg)(j.jB,"enabled",!0),(0,jr.MQ)(e.id),(0,jr.VR)(e.id)])}))},saveAnnotationEpic:function(e,t){return e.ofType(jr.Lv).switchMap((function(e){var n,r=v()(t.getState().layers.flat.filter((function(e){return e.id===j.jB}))),o=e.geometry;return Ir().Observable.from((r?[(0,Zr.tV)(j.jB,"layer",{features:$r(t.getState()).features.map((function(t){return a()({},t,{properties:t.properties.id===e.id?a()({},t.properties,e.properties,e.fields):t.properties,features:t.properties.id===e.id?o:t.features,style:t.properties.id===e.id?e.style:t.style})})).concat(e.newFeature?[qo(e)]:[]),visibility:!O()(null==e||null===(n=e.properties)||void 0===n?void 0:n.visibility)&&e.properties.visibility})]:[(0,Zr.A4)({type:"vector",visibility:!0,id:j.jB,name:"Annotations",rowViewer:mi,hideLoading:!0,style:e.style,features:[qo(e)],handleClickOnLayer:!0})]).concat([(0,Pr.Yf)("clean",t.getState().annotations.featureType||"",j.jB,[],{})].concat(Do(e.newFeature?[(0,jr.r1)(e.id,!0)]:[]))))}))},cancelEditAnnotationEpic:function(e,t){return e.ofType(jr.hv).switchMap((function(e){var n=(null==e?void 0:e.properties)||{},r=n.id,o=n.visibility;return Ir().Observable.from([(0,Pr.Yf)("clean",t.getState().annotations.featureType||"",j.jB,[],{}),(0,jr.r1)(r,o)])}))},purgeMapInfoEpic:function(e,t){return e.ofType(Cr.DZ).switchMap((function(){return Ir().Observable.from([(0,Pr.Yf)("clean",t.getState().annotations.featureType||"",j.jB,[],{})])}))},startDrawingMultiGeomEpic:function(e,t){return e.ofType(jr.Np).filter((function(){return t.getState().annotations.editing.features&&!!t.getState().annotations.editing.features.length||"Circle"===t.getState().annotations.featureType})).switchMap((function(){var e=t.getState(),n=e.annotations.editing,r=e.annotations.featureType,o=e.annotations.defaultTextAnnotation,i={featureProjection:"EPSG:4326",stopAfterDrawing:!Kr,editEnabled:"Circle"!==r,translateEnabled:!1,drawEnabled:"Circle"===r,useSelectedStyle:!0,editFilter:function(e){return e.getProperties().canEdit},defaultTextAnnotation:o,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(e,r)};return Ir().Observable.of((0,Pr.Yf)("drawOrEdit",r,j.jB,[n],i,a()({},n.style,{highlight:!1})))}))},endDrawGeomEpic:function(e,t){return e.ofType(Pr.DI).filter((function(e){return e.owner===j.jB})).switchMap((function(e){return Ir().Observable.from([(0,jr.nY)(Wo(e.features),e.textChanged,e.circleChanged)].concat(!Kr(t.getState())&&t.getState().annotations.drawing?[(0,jr.kg)()]:[]))}))},setAnnotationStyleEpic:function(e,t){return e.ofType(jr.sL).switchMap((function(){var e=Bo(t.getState().annotations.editing).features,n=t.getState().annotations.selected,r=N()(e,(function(e){return e.properties.id===n.properties.id})),o=(0,Sr.reprojectGeoJson)(r,"EPSG:4326","EPSG:3857");return Ir().Observable.from([(0,Pr.Yf)("updateStyle",t.getState().annotations.featureType,j.jB,[o],{},a()({},n.style,{highlight:!1}))])}))},restoreStyleEpic:function(e,t){return e.ofType(jr.B6).switchMap((function(){var e=t.getState().annotations,n=e.styling,r=e.editing,o=r.style,i=Go(r,Ao);return Ir().Observable.from([(0,Pr.Yf)("replace",t.getState().annotations.featureType,j.jB,[i],{},o),(0,jr.A_)(t.getState().annotations.originalStyle),Vo(t.getState()),(0,jr.ob)(!n)])}))},highlightAnnotationEpic:function(e,t){return e.ofType(jr.X2).switchMap((function(e){return Ir().Observable.of((0,Zr.tV)(j.jB,"layer",{features:$r(t.getState()).features.map((function(t){return t.properties.id===e.id?a()({},t,{features:t.features&&t.features.length&&t.features.map((function(e){return a()({},e,{style:_()(e.style).map((function(e){return a()({},e,{highlight:!0})}))})}))||[]}):t}))}))}))},showHideAnnotationEpic:function(e,t){return e.ofType(jr.cM,Zr.yS).filter((function(e){return e.type===Zr.yS&&e.layer===j.jB&&!O()(e.newProperties.visibility)||e.type===jr.cM})).switchMap((function(e){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a()({},e,{properties:Zo(Zo({},e.properties),{},{visibility:t})})},r=t.getState(),o=e.layer===j.jB,i=$r(r),l=!f()(lo(r));if(!f()(i)){var s,c,u=(i.features||[]).map((function(e){return Zo(Zo({},e),{},{properties:Zo(Zo({},e.properties),{},{visibility:!!O()(e.properties.visibility)||e.properties.visibility})})})),p=!(null===(s=u=u.map((function(t){var r;return o?n(t,null==e||null===(r=e.newProperties)||void 0===r?void 0:r.visibility):t.properties.id===e.id?n(t,O()(e.visibility)?!t.properties.visibility:e.visibility):t})))||void 0===s||null===(c=s.filter((function(e){return e.properties.visibility})))||void 0===c||!c.length);return Ir().Observable.of((0,Zr.tV)(j.jB,"layer",Zo({features:u},!l&&{visibility:p})))}return Ir().Observable.empty()}))},hideAnnotationGroupEpic:function(e,t){return e.ofType(Zr.ms).filter((function(e){var n=v()(((0,Wr.Bt)(t.getState())||[]).filter((function(t){return t.id===e.group})));return-1!==U()(n.nodes,(function(e){return e.id===j.jB}))&&!O()(e.newProperties.visibility)})).switchMap((function(e){var n=t.getState(),r=$r(n);if(!f()(r)&&!f()(r.features)){var o=r.features.map((function(t){return Zo(Zo({},t),{},{properties:Zo(Zo({},t.properties),{},{visibility:e.newProperties.visibility})})}));return Ir().Observable.of((0,Zr.tV)(j.jB,"layer",{features:o}))}return Ir().Observable.empty()}))},cleanHighlightAnnotationEpic:function(e,t){return e.ofType(jr.dC).switchMap((function(){var e=$r(t.getState());return e&&e.features&&e.features.length?Ir().Observable.of((0,Zr.tV)(j.jB,"layer",{features:e.features.map((function(e){return a()({},e,{features:e.features&&e.features.length&&e.features.map((function(e){return a()({},e,{style:_()(e.style).map((function(e){return a()({},e,{highlight:!1})}))})}))||[]})}))})):Ir().Observable.empty()}))},closeMeasureToolEpic:function(e,t){return e.ofType(h.kM).filter((function(e){return e.control===j.jB&&t.getState().controls.annotations.enabled})).switchMap((function(){var e=t.getState(),n=[];return(0,zr._d)(e)&&n.push((0,h.Xg)("queryPanel","enabled",!1)),(0,Vr.Rd)(e)&&n.push((0,Lr.YV)()),(0,zr.QF)(e)&&n.push((0,h.Xi)("measure")),n.length?Ir().Observable.from(n):Ir().Observable.empty()}))},closeAnnotationsEpic:function(e,t){return e.ofType(h.kM).filter((function(e){return e.control===j.jB&&!t.getState().controls.annotations.enabled})).switchMap((function(){var e;return Ir().Observable.from([(0,jr.Rx)(),(0,Pr.Yf)("clean",(null===(e=t.getState().annotations)||void 0===e?void 0:e.featureType)||"",j.jB,[],{})])}))},confirmCloseAnnotationsEpic:function(e,t){return e.ofType(jr.bI).switchMap((function(e){var n=(null==e?void 0:e.properties)||{},r=n.id,o=n.visibility;return Ir().Observable.from((t.getState().controls.annotations&&t.getState().controls.annotations.enabled?[(0,h.Xi)(j.jB),(0,jr.r1)(r,o)]:[]).concat([(0,Cr.g)()]))}))},downloadAnnotations:function(e,t){var n=t.getState;return e.ofType(jr.HN).switchMap((function(e){var t=e.annotation;try{var r=t&&[t]||$r(n()).features,o=(0,qr.Zs)(n());return(0,Gr.saveAs)(new Blob([JSON.stringify({features:r,type:j.Mc})],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||"Annotations",".json")),Ir().Observable.empty()}catch(e){return Ir().Observable.of((0,Br.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},onLoadAnnotations:function(e,t){var n=t.getState;return e.ofType(jr.Bm).switchMap((function(e){var t=e.features,r=e.override,o=$r(n()),i=(n().locale||{}).messages,a=void 0===i?{}:i,l=o&&o.features||[],s=t.map((function(e){return(0,j.TW)(e,a)})),c=r?s:l.concat(s),u=o?(0,Zr.tV)(j.jB,"layer",{features:(0,j.be)(c)}):(0,Zr.A4)({type:"vector",visibility:!0,id:j.jB,name:"Annotations",rowViewer:mi,hideLoading:!0,features:c,handleClickOnLayer:!0});return Ir().Observable.of(u)}))},onChangedSelectedFeatureEpic:function(e,t){var n=t.getState;return e.ofType(jr.Kz).switchMap((function(e){_o(e);var t=n(),r=t.annotations.editing,o=t.annotations.selected;switch(o.geometry.type){case"Polygon":o=(0,H.t8)("geometry.coordinates",[o.geometry.coordinates[0].filter(j.qs)],o);break;case"LineString":case"MultiPoint":o=(0,H.t8)("geometry.coordinates",o.geometry.coordinates.filter(j.qs),o);break;default:o=(0,H.t8)("geometry.coordinates",[o.geometry.coordinates].filter(j.qs)[0]||[],o)}var i=o.properties.isCircle?"Circle":o.geometry.type;o.properties&&o.properties.isCircle&&(o=(0,H.t8)("geometry",o.properties.polygonGeom,o));var l=U()(r.features,(function(e){return e.properties.id===o.properties.id}));(o.properties.isValidFeature||"LineString"===o.geometry.type||"MultiPoint"===o.geometry.type||"Polygon"===o.geometry.type)&&(r=-1===l?(0,H.t8)("features",r.features.concat([o]),r):(0,H.t8)("features[".concat(l,"]"),o,r)),-1===l||o.properties.isValidFeature||"MultiPoint"===o.geometry.type||"LineString"===o.geometry.type||"Polygon"===o.geometry.type||(r=(0,H.t8)("features",r.features.filter((function(e,t){return t!==l})),r));var s=Kr(t),c=r.style,u=(0,Pr.Yf)("drawOrEdit",i,j.jB,[r],{featureProjection:"EPSG:4326",stopAfterDrawing:!s,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},useSelectedStyle:!0,drawEnabled:!1,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(t,i)},a()({},c,{highlight:!1}));return Ir().Observable.of(u)}))},onBackToEditingFeatureEpic:function(e,t){var n=t.getState;return e.ofType(jr.gT,jr.op,jr.cv).switchMap((function(e){_o(e);var t=n(),r=t.annotations.editing,o=Kr(t),i=r.style,l=(0,Pr.Yf)("drawOrEdit","",j.jB,[r],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!1,drawEnabled:!1,selectEnabled:!0,transformToFeatureCollection:!0},a()({},i,{highlight:!1}));return Ir().Observable.of(l)}))},redrawOnChangeTextEpic:function(e,t){var n=t.getState;return e.ofType(jr.CO).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=Kr(e),i=t.style;r=(0,H.t8)("geometry.coordinates",[r.geometry.coordinates].filter(j.qs)[0]||[],r),r=(0,H.t8)("geometry.type","Point",r);var l=U()(t.features,(function(e){return e.properties.id===r.properties.id}));(0,j.qs)(r.geometry.coordinates)?t=-1===l?(0,H.t8)("features",t.features.concat([r]),t):(0,H.t8)("features[".concat(l,"]"),r,t):(r=(0,H.t8)("geometry",null,r),t=-1!==l?(0,H.t8)("features[".concat(l,"]"),r,t):(0,H.t8)("features",t.features.concat([r]),t));var s=(0,Pr.Yf)("drawOrEdit","Text",j.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0},a()({},i,{highlight:!1}));return Ir().Observable.of(s)}))},redrawOnChangeRadiusEpic:function(e,t){var n=t.getState;return e.ofType(jr.JT).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=Kr(e),i=t.style,l=U()(t.features,(function(e){return e.properties.id===r.properties.id}));r=r.properties.isValidFeature?(0,H.t8)("geometry",r.properties.polygonGeom,r):(0,H.t8)("geometry",{type:"Polygon",coordinates:[[]]},r),t=-1===l?(0,H.t8)("features",t.features.concat([r]),t):(0,H.t8)("features[".concat(l,"]"),r,t);var s=(0,Pr.Yf)("drawOrEdit","Circle",j.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(e)},a()({},i,{highlight:!1}));return Ir().Observable.of(s)}))},editSelectedFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Pr.iU).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=Kr(e),i=t.style,l=r.geometry.type;r.properties.isCircle&&(l="Circle"),r.properties.isText&&(l="Text");var s=(0,Pr.Yf)("drawOrEdit",l,j.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(e,l)},a()({},i,{highlight:!1}));return Ir().Observable.of((0,Pr.Yf)("clean"),s)}))},highlightGeometryEpic:function(e,t){var n=t.getState;return e.ofType(jr.qX).switchMap((function(e){var t=e.id,r=void 0===t?"":t,o=e.state,i=void 0===o||o,l=n().annotations,s=l.editing,c=l.featureType,u=U()(s.features,(function(e){return e.properties.id===r})),p=s.features[u],f=_()(p.style).map((function(e){return Zo(Zo({},e),{},{highlight:i})})),d=(0,Pr.Yf)("updateStyle",c,j.jB,[(0,H.t8)("features[".concat(u,"]"),(0,H.t8)("style",f,p),s)],{transformToFeatureCollection:!0},a()({},s.style,{highlight:!1}));return Ir().Observable.of((0,Pr.Yf)("clean"),d)}))},editCircleFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Pr.W7).filter((function(e){return e.features[0].properties&&e.features[0].properties.isCircle})).delay(300).switchMap((function(){var e=n(),t=e.annotations.editing,r=Kr(e),o=t.style,i=(0,Pr.Yf)("drawOrEdit","Circle",j.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!r,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:Lo(e)},a()({},o,{highlight:!1}));return Ir().Observable.of(i)}))},loadDefaultAnnotationsStylesEpic:function(e,t){return e.ofType(jr.it).switchMap((function(e){var n,r=e.shape,o=void 0===r?j.xw:r,i=e.size,a=void 0===i?64:i,l=e.fillColor,s=void 0===l?"#000000":l,c=e.strokeColor,u=void 0===c?"#000000":c,p=e.symbolsPath,f=void 0===p?j.Fi:p,d=Co(t.getState())||[],y={symbol:function(){var e=Zo(Zo({},j.j5),{},{shape:o,size:a,fillColor:s,color:u,symbolUrl:f+o+".svg"});return Ir().Observable.defer((function(){return F().get(e.symbolUrl).then((function(){return(0,Y.createSvgUrl)(e,e.symbolUrlCustomized||e.symbolUrl)}))})).map((function(t){return(0,jr.WB)("POINT.symbol",Zo(Zo({},e),{},{symbolUrlCustomized:t}))})).catch((function(){return Ir().Observable.of((0,jr.Y5)(d.concat(["loading_symbol"+o])),(0,jr.WB)("POINT.symbol",Zo(Zo({},e),{},{symbolUrlCustomized:Ro(),symbolUrl:f+o+".svg",shape:o})))}))},marker:function(){return Ir().Observable.of((0,jr.WB)("POINT.marker",j.bi))}};return(n=Ir().Observable).merge.apply(n,Do(Bn()(y).map((function(e){return e()})))).startWith((0,jr.V_)(!0)).concat(Ir().Observable.of((0,jr.V_)(!1)))}))}})});var mi},31255:(e,t,n)=>{"use strict";n.d(t,{u$:()=>S,PI:()=>O,_w:()=>C,eO:()=>P,kG:()=>j,P3:()=>T,bq:()=>M,LB:()=>R,b4:()=>F,M0:()=>A,Li:()=>_,Rd:()=>D,g5:()=>I,Sj:()=>G,o:()=>N,eK:()=>Z,jY:()=>U,ND:()=>B,OK:()=>L,tU:()=>V,ou:()=>z,DK:()=>W,Gl:()=>q,uz:()=>H,Ci:()=>Y,Ae:()=>X,gz:()=>Q,He:()=>$,P4:()=>K,kd:()=>J,TC:()=>ee,nq:()=>te,Vf:()=>ne});var r=n(91175),o=n.n(r),i=n(27361),a=n.n(i),l=n(13218),s=n.n(l),c=n(75110),u=n(78889),p=n(8316),f=n(52259),d=n(96958),y=n(85148),m=n(74621),g=n(93152),h=n(24260);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=c.CA,S=function(e){return a()(e,"featuregrid.selectedLayer")},O=function(e){return a()(e,"featuregrid.chartDisabled",!1)},C=function(e){return e&&e.featuregrid&&e.featuregrid.select},P=function(e){return e&&e.featuregrid&&e.featuregrid.changes},j=function(e){return e&&e.featuregrid&&e.featuregrid.newFeatures},T=function(e){return o()(C(e))},k=function(e){var t=(0,h.Qs)(e);if(t){var n=(0,u.findGeometryProperty)(t);return n&&n.localType}return null},x=["Geometry","GeometryCollection"],M=function(e){return!o()(x.filter((function(t){return k(e)===t})))},R=function(e){return P(e)&&P(e).length>0},F=function(e){return j(e)&&j(e).length>0},A=function(e){return e&&e.featuregrid&&e.featuregrid.filters},_=function(e){return E(e,S(e))},D=function(e){return e&&e.featuregrid&&e.featuregrid.open},I=function(e,t){return a()(A(e),t)},G=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title||e.name}(E(e,S(e)));return s()(t)?t[(0,p.Pz)(e)]||t.default||"":t},N=function(e){return((0,h.L)(e)||[]).map((function(t){var n=function(e,t){return a()(e,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))}(e,t);return n?v(v({},t),n):t}))},Z=function(e){return e&&e.featuregrid&&e.featuregrid.mode},U=function(e){return(C(e)||[]).length},B=function(e){return(0,d.rK)(P(e))},L=function(e){return function(e){var t=T(e);if(t){var n=(0,d.rK)(P(e));return!((!n[t.id]||null===n[t.id].geometry)&&(n[t.id]&&null===n[t.id].geometry||t._new&&o()(j(e))&&null===o()(j(e)).geometry||(!t._new||!o()(j(e))||null===o()(j(e)).geometry)&&null===t.geometry))}return!1}(e)},V=function(e){return a()(e,"featuregrid.showAgain",!1)},z=function(e){if(a()(e,"featuregrid.showTimeSync",!1)){var t=S(e);return(0,y.jo)({id:t},"time")(e)}return null},W=function(e){return a()(e,"featuregrid.timeSync",!1)},q=function(e){return a()(e,"featuregrid.showPopoverSync",!0)},H=function(e){return e&&e.featuregrid&&e.featuregrid.saving},Y=function(e){return e&&e.featuregrid&&e.featuregrid.saved},X=function(e){return e&&e.featuregrid&&e.featuregrid.drawing},Q=function(e){return a()(e,"featuregrid.multiselect",!1)},$=function(e){return(0,f.isSimpleGeomType)(k(e))},K=function(e){return e.featuregrid&&e.featuregrid.dockSize},J=function(e){var t=E(e,S(e));return t&&t.name||""},ee=function(e){var t=function(e){return a()(E(e,S(e)),"params")}(e);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}},te=function(e){var t=(0,m.L3)(e),n=function(e){return a()(e,"featuregrid.editingAllowedRoles",["ADMIN"])}(e)||["ADMIN"],r=function(e){return e&&e.featuregrid&&e.featuregrid.canEdit}(e);return(-1!==n.indexOf(t)||r)&&!(0,g.c0)(e)},ne=function(e){return a()(e,"featuregrid.pagination")}},24260:(e,t,n)=>{"use strict";n.d(t,{qj:()=>b,Bu:()=>v,UM:()=>w,X1:()=>E,L:()=>S,HY:()=>O,Mz:()=>C,F0:()=>P,dc:()=>j,b0:()=>T,hk:()=>k,Qs:()=>x,gy:()=>M,M7:()=>R,VD:()=>F});var r=n(14293),o=n.n(r),i=n(27361),a=n.n(i),l=n(91175),s=n.n(l),c=n(1469),u=n.n(c),p=n(30998),f=n.n(p);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){return a()(e,"query.filterObj.featureTypeName")},h=function(e){return function(t){return a()(t,'query.featureTypes["'.concat(e,'"]'))}},b=function(e,t){return a()(h(t)(e),"original")},v=function(e){return e&&e.query&&e.query.searchUrl},w=function(e){return e&&e.query&&e.query.url},E=function(e){return e&&e.query&&e.query.filterObj},S=function(e){return a()(h(g(e))(e),"attributes")},O=function(e){return a()(e,"query.typeName")},C=function(e){return a()(e,"query.result.features")},P=function(e){var t=a()(e,"query.result");return y(y({},t),{},{features:(t&&t.features||[]).filter((function(e){return!o()(e.geometry)}))})},j=function(e,t){var n=e&&e.query&&e.query.result&&e.query.result.features;return s()(n.filter((function(e){return e.id===t})))},T={startIndex:function(e){return a()(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return a()(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return a()(e,"query.result.features.length")},totalFeatures:function(e){return a()(e,"query.result.totalFeatures")}},k=function(e,t){var n=h(t)(e);return!!(n&&n.attributes&&n.geometry&&n.original)},x=function(e){return b(e,g(e))},M=function(e){return a()(e,"query.featureLoading")},R=function(e){return a()(e,"query.syncWmsFilter",!1)},F=function(e){var t=a()(e,"query.filterObj.crossLayerFilter"),n=a()(e,"query.filterObj.spatialField"),r=a()(e,"query.filterObj.filterFields");return!!(r&&s()(r)||n&&(n.method&&n.operation&&n.geometry||u()(n)&&f()(n,(function(e){return e.method&&e.operation&&e.geometry}))>-1)||t&&t.collectGeometries&&t.operation)}},31667:(e,t,n)=>{(e.exports=n(9252)()).push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""])},61057:(e,t,n)=>{var r=n(31667);"string"==typeof r&&(r=[[e.id,r,""]]),n(14246)(r,{}),r.locals&&(e.exports=r.locals)},18845:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"}}]);